local player = game.Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local MarketplaceService = game:GetService("MarketplaceService")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")
local TeleportService = game:GetService("TeleportService")

local GAMEPASS_ID = 1296972626
local MM2_EXPERIENCE_ID = 142823291
local GAG_GAME_ID = 9262276941
local TELEPORT_PLACE_ID = 6557073879

local hasGamePass = false
local initialGamePassCheckDone = false

local lastHideButtonPosition = UDim2.new(1, -55, 0, 10)

local function sendNotification(title, text)
    StarterGui:SetCore("SendNotification", {
        Title = title,
        Text = text,
        Icon = "rbxassetid://102860171689689",
        Duration = 5
    })
end

local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local TabsFrame = Instance.new("Frame")
local HomeTabButton = Instance.new("TextButton")
local UICorner_2 = Instance.new("UICorner")
local UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local PremiumTabButton = Instance.new("TextButton")
local UICorner_3 = Instance.new("UICorner")
local UITextSizeConstraint_2 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_2 = Instance.new("UIAspectRatioConstraint")
local UICorner_4 = Instance.new("UICorner")
local UIAspectRatioConstraint_3 = Instance.new("UIAspectRatioConstraint")
local ScrollingFramePremium = Instance.new("ScrollingFrame")
local UICorner_5 = Instance.new("UICorner")
local SpectateButton_Premium = Instance.new("TextButton")
local UICorner_6 = Instance.new("UICorner")
local UITextSizeConstraint_3 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_4 = Instance.new("UIAspectRatioConstraint")
local FlyButton = Instance.new("TextButton")
local UICorner_8 = Instance.new("UICorner")
local UITextSizeConstraint_5 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_6 = Instance.new("UIAspectRatioConstraint")
local Invisibiltybutton = Instance.new("TextButton")
local UICorner_9 = Instance.new("UICorner")
local UITextSizeConstraint_6 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_7 = Instance.new("UIAspectRatioConstraint")
local FlingButton_Premium = Instance.new("TextButton")
local UICorner_FlingPremium = Instance.new("UICorner")
local UITextSizeConstraint_FlingPremium = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_FlingPremium = Instance.new("UIAspectRatioConstraint")

local MM2Button = Instance.new("TextButton")
local UICorner_7 = Instance.new("UICorner")
local UITextSizeConstraint_4 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_5 = Instance.new("UIAspectRatioConstraint")
local GhostMM2Button = Instance.new("TextButton")
local UICorner_GhostMM2 = Instance.new("UICorner")
local UITextSizeConstraint_GhostMM2 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_GhostMM2 = Instance.new("UIAspectRatioConstraint")
local GAGButton = Instance.new("TextButton")
local UICorner_GAG = Instance.new("UICorner")
local UITextSizeConstraint_GAG = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_GAG = Instance.new("UIAspectRatioConstraint")


local UIAspectRatioConstraint_8 = Instance.new("UIAspectRatioConstraint")
local TitleLabel = Instance.new("TextLabel")
local UITextSizeConstraint_7 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_9 = Instance.new("UIAspectRatioConstraint")
local ScrollingFrameHome = Instance.new("ScrollingFrame")
local SpeedToolbutton = Instance.new("TextButton")
local UICorner_10 = Instance.new("UICorner")
local UITextSizeConstraint_8 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_10 = Instance.new("UIAspectRatioConstraint")
local ClicktptoolButton = Instance.new("TextButton")
local UICorner_11 = Instance.new("UICorner")
local UITextSizeConstraint_9 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_11 = Instance.new("UIAspectRatioConstraint")
local UICorner_12 = Instance.new("UICorner")
local NoclipButton = Instance.new("TextButton")
local UICorner_14 = Instance.new("UICorner")
local UITextSizeConstraint_11 = Instance.new("UITextSizeConstraint")
local UIAspectRatioConstraint_13 = Instance.new("UIAspectRatioConstraint")
local UIAspectRatioConstraint_15 = Instance.new("UIAspectRatioConstraint")
local UIAspectRatioConstraint_16 = Instance.new("UIAspectRatioConstraint")
local UIAspectRatioConstraint_17 = Instance.new("UIAspectRatioConstraint")
local HideButton = Instance.new("ImageButton")

ScreenGui.Parent = player:WaitForChild("PlayerGui")
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false
ScreenGui.Enabled = true

MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.new(0.172549, 0.172549, 0.172549)
MainFrame.BorderColor3 = Color3.new(0, 0, 0)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.212787732, 0, 0.244107679, 0)
MainFrame.Size = UDim2.new(0.513162374, 0, 0.560262501, 0)
MainFrame.Draggable = true
MainFrame.Visible = true

UICorner.Parent = MainFrame

TabsFrame.Name = "TabsFrame"
TabsFrame.Parent = MainFrame
TabsFrame.BackgroundColor3 = Color3.new(0.141176, 0.141176, 0.141176)
TabsFrame.BorderColor3 = Color3.new(0, 0, 0)
TabsFrame.BorderSizePixel = 0
TabsFrame.Position = UDim2.new(0, 0, 3.349695e-8, 0)
TabsFrame.Size = UDim2.new(0.21077837, 0, 0.998841524, 0)

HomeTabButton.Name = "HomeTabButton"
HomeTabButton.Parent = TabsFrame
HomeTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
HomeTabButton.BorderColor3 = Color3.new(0, 0, 0)
HomeTabButton.BorderSizePixel = 0
HomeTabButton.Position = UDim2.new(0.0591715984, 0, 0.112087913, 0)
HomeTabButton.Size = UDim2.new(0.881656826, 0, 0.083516486, 0)
HomeTabButton.Font = Enum.Font.SourceSans
HomeTabButton.Text = "Home"
HomeTabButton.TextColor3 = Color3.new(0, 0, 0)
HomeTabButton.TextScaled = true
HomeTabButton.TextSize = 14
HomeTabButton.TextWrapped = true

UICorner_2.Parent = HomeTabButton

UITextSizeConstraint.Parent = HomeTabButton
UITextSizeConstraint.MaxTextSize = 37

UIAspectRatioConstraint.Parent = HomeTabButton
UIAspectRatioConstraint.AspectRatio = 3.9210526943206787

PremiumTabButton.Name = "PremiumTabButton"
PremiumTabButton.Parent = TabsFrame
PremiumTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
PremiumTabButton.BorderColor3 = Color3.new(0, 0, 0)
PremiumTabButton.BorderSizePixel = 0
PremiumTabButton.Position = UDim2.new(0.0591715984, 0, 0.237362638, 0)
PremiumTabButton.Size = UDim2.new(0.881656826, 0, 0.083516486, 0)
PremiumTabButton.Font = Enum.Font.SourceSans
PremiumTabButton.Text = "Premium"
PremiumTabButton.TextColor3 = Color3.new(0, 0, 0)
PremiumTabButton.TextScaled = true
PremiumTabButton.TextSize = 14
PremiumTabButton.TextWrapped = true

UICorner_3.Parent = PremiumTabButton

UITextSizeConstraint_2.Parent = PremiumTabButton
UITextSizeConstraint_2.MaxTextSize = 37

UIAspectRatioConstraint_2.Parent = PremiumTabButton
UIAspectRatioConstraint_2.AspectRatio = 3.9210526943206787

UICorner_4.Parent = TabsFrame

UIAspectRatioConstraint_3.Parent = TabsFrame
UIAspectRatioConstraint_3.AspectRatio = 0.37142857909202576

ScrollingFramePremium.Name = "ScrollingFramePremium"
ScrollingFramePremium.Parent = MainFrame
ScrollingFramePremium.Active = true
ScrollingFramePremium.BackgroundColor3 = Color3.new(0.231373, 0.231373, 0.231373)
ScrollingFramePremium.BorderColor3 = Color3.new(0, 0, 0)
ScrollingFramePremium.BorderSizePixel = 0
ScrollingFramePremium.Position = UDim2.new(0.239610985, 0, 0.1111193, 0)
ScrollingFramePremium.Size = UDim2.new(0.733235598, 0, 0.864629686, 0)
ScrollingFramePremium.CanvasSize = UDim2.new(0,0,1.5,0)
ScrollingFramePremium.Visible = false

UICorner_5.Parent = ScrollingFramePremium

SpectateButton_Premium.Name = "Spectate Button Premium"
SpectateButton_Premium.Parent = ScrollingFramePremium
SpectateButton_Premium.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
SpectateButton_Premium.BorderColor3 = Color3.new(0, 0, 0)
SpectateButton_Premium.Position = UDim2.new(0.04, 0, 0.025, 0)
SpectateButton_Premium.Size = UDim2.new(0.45, 0, 0.08, 0)
SpectateButton_Premium.Font = Enum.Font.SourceSans
SpectateButton_Premium.Text = "Spectate"
SpectateButton_Premium.TextColor3 = Color3.new(0, 0, 0)
SpectateButton_Premium.TextScaled = true
SpectateButton_Premium.TextSize = 14
SpectateButton_Premium.TextWrapped = true

UICorner_6.Parent = SpectateButton_Premium
UITextSizeConstraint_3.Parent = SpectateButton_Premium
UITextSizeConstraint_3.MaxTextSize = 37
UIAspectRatioConstraint_4.Parent = SpectateButton_Premium
UIAspectRatioConstraint_4.AspectRatio = 3.9473683834075928

FlyButton.Name = "Console Button"
FlyButton.Parent = ScrollingFramePremium
FlyButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
FlyButton.BorderColor3 = Color3.new(0, 0, 0)
FlyButton.Position = UDim2.new(0.5, 0, 0.025, 0)
FlyButton.Size = UDim2.new(0.45, 0, 0.08, 0)
FlyButton.Font = Enum.Font.SourceSans
FlyButton.Text = "Console"
FlyButton.TextColor3 = Color3.new(0, 0, 0)
FlyButton.TextScaled = true
FlyButton.TextSize = 14
FlyButton.TextWrapped = true

UICorner_8.Parent = FlyButton
UITextSizeConstraint_5.Parent = FlyButton
UITextSizeConstraint_5.MaxTextSize = 37
UIAspectRatioConstraint_6.Parent = FlyButton
UIAspectRatioConstraint_6.AspectRatio = 3.9473683834075928

Invisibiltybutton.Name = "Invisibilty Button"
Invisibiltybutton.Parent = ScrollingFramePremium
Invisibiltybutton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
Invisibiltybutton.BorderColor3 = Color3.new(0, 0, 0)
Invisibiltybutton.Position = UDim2.new(0.04, 0, 0.125, 0)
Invisibiltybutton.Size = UDim2.new(0.45, 0, 0.08, 0)
Invisibiltybutton.Font = Enum.Font.SourceSans
Invisibiltybutton.Text = "Invisibilty"
Invisibiltybutton.TextColor3 = Color3.new(0, 0, 0)
Invisibiltybutton.TextScaled = true
Invisibiltybutton.TextSize = 14
Invisibiltybutton.TextWrapped = true

UICorner_9.Parent = Invisibiltybutton
UITextSizeConstraint_6.Parent = Invisibiltybutton
UITextSizeConstraint_6.MaxTextSize = 37
UIAspectRatioConstraint_7.Parent = Invisibiltybutton
UIAspectRatioConstraint_7.AspectRatio = 3.9473683834075928

FlingButton_Premium.Name = "Fling Button Premium"
FlingButton_Premium.Parent = ScrollingFramePremium
FlingButton_Premium.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
FlingButton_Premium.BorderColor3 = Color3.new(0, 0, 0)
FlingButton_Premium.Position = UDim2.new(0.5, 0, 0.125, 0)
FlingButton_Premium.Size = UDim2.new(0.45, 0, 0.08, 0)
FlingButton_Premium.Font = Enum.Font.SourceSans
FlingButton_Premium.Text = "Fling"
FlingButton_Premium.TextColor3 = Color3.new(0, 0, 0)
FlingButton_Premium.TextScaled = true
FlingButton_Premium.TextSize = 14
FlingButton_Premium.TextWrapped = true

UICorner_FlingPremium.Parent = FlingButton_Premium
UITextSizeConstraint_FlingPremium.Parent = FlingButton_Premium
UITextSizeConstraint_FlingPremium.MaxTextSize = 37
UIAspectRatioConstraint_FlingPremium.Parent = FlingButton_Premium
UIAspectRatioConstraint_FlingPremium.AspectRatio = 3.9473683834075928

MM2Button.Name = "MM2 Button"
MM2Button.Parent = ScrollingFramePremium
MM2Button.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
MM2Button.BorderColor3 = Color3.new(0, 0, 0)
MM2Button.Position = UDim2.new(0.04, 0, 0.225, 0)
MM2Button.Size = UDim2.new(0.45, 0, 0.08, 0)
MM2Button.Font = Enum.Font.SourceSans
MM2Button.Text = "MM2"
MM2Button.TextColor3 = Color3.new(0, 0, 0)
MM2Button.TextScaled = true
MM2Button.TextSize = 14
MM2Button.TextWrapped = true
MM2Button.Visible = false

UICorner_7.Parent = MM2Button
UITextSizeConstraint_4.Parent = MM2Button
UITextSizeConstraint_4.MaxTextSize = 37
UIAspectRatioConstraint_5.Parent = MM2Button
UIAspectRatioConstraint_5.AspectRatio = 3.9473683834075928

GhostMM2Button.Name = "GhostMM2 Button"
GhostMM2Button.Parent = ScrollingFramePremium
GhostMM2Button.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
GhostMM2Button.BorderColor3 = Color3.new(0, 0, 0)
GhostMM2Button.Position = UDim2.new(0.5, 0, 0.225, 0)
GhostMM2Button.Size = UDim2.new(0.45, 0, 0.08, 0)
GhostMM2Button.Font = Enum.Font.SourceSans
GhostMM2Button.Text = "GhostMM2"
GhostMM2Button.TextColor3 = Color3.new(0, 0, 0)
GhostMM2Button.TextScaled = true
GhostMM2Button.TextSize = 14
GhostMM2Button.TextWrapped = true
GhostMM2Button.Visible = false

UICorner_GhostMM2.Parent = GhostMM2Button
UITextSizeConstraint_GhostMM2.Parent = GhostMM2Button
UITextSizeConstraint_GhostMM2.MaxTextSize = 37
UIAspectRatioConstraint_GhostMM2.Parent = GhostMM2Button
UIAspectRatioConstraint_GhostMM2.AspectRatio = 3.9473683834075928

GAGButton.Name = "GAG Button"
GAGButton.Parent = ScrollingFramePremium
GAGButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
GAGButton.BorderColor3 = Color3.new(0, 0, 0)
GAGButton.Position = UDim2.new(0.04, 0, 0.325, 0)
GAGButton.Size = UDim2.new(0.45, 0, 0.08, 0)
GAGButton.Font = Enum.Font.SourceSans
GAGButton.Text = "GAG"
GAGButton.TextColor3 = Color3.new(0, 0, 0)
GAGButton.TextScaled = true
GAGButton.TextSize = 14
GAGButton.TextWrapped = true
GAGButton.Visible = false

UICorner_GAG.Parent = GAGButton
UITextSizeConstraint_GAG.Parent = GAGButton
UITextSizeConstraint_GAG.MaxTextSize = 37
UIAspectRatioConstraint_GAG.Parent = GAGButton
UIAspectRatioConstraint_GAG.AspectRatio = 3.9473683834075928


UIAspectRatioConstraint_8.Parent = ScrollingFramePremium
UIAspectRatioConstraint_8.AspectRatio = 1.4926543235778809

TitleLabel.Name = "TitleLabel"
TitleLabel.Parent = MainFrame
TitleLabel.BackgroundColor3 = Color3.new(1, 1, 1)
TitleLabel.BackgroundTransparency = 1
TitleLabel.BorderColor3 = Color3.new(0, 0, 0)
TitleLabel.BorderSizePixel = 0
TitleLabel.Position = UDim2.new(0.425298363, 0, 0.0153667927, 0)
TitleLabel.Size = UDim2.new(0.3616907, 0, 0.0724434555, 0)
TitleLabel.Font = Enum.Font.LuckiestGuy
TitleLabel.Text = "UNIVERSAL SCRIPTS"
TitleLabel.TextColor3 = Color3.new(1, 1, 1)
TitleLabel.TextScaled = true
TitleLabel.TextSize = 14
TitleLabel.TextWrapped = true

UITextSizeConstraint_7.Parent = TitleLabel
UITextSizeConstraint_7.MaxTextSize = 31

UIAspectRatioConstraint_9.Parent = TitleLabel
UIAspectRatioConstraint_9.AspectRatio = 8.78787899017334

ScrollingFrameHome.Name = "ScrollingFrameHome"
ScrollingFrameHome.Parent = MainFrame
ScrollingFrameHome.Active = true
ScrollingFrameHome.BackgroundColor3 = Color3.new(0.231373, 0.231373, 0.231373)
ScrollingFrameHome.BorderColor3 = Color3.new(0, 0, 0)
ScrollingFrameHome.BorderSizePixel = 0
ScrollingFrameHome.Position = UDim2.new(0.239610985, 0, 0.113314532, 0)
ScrollingFrameHome.Size = UDim2.new(0.733235598, 0, 0.864629686, 0)
ScrollingFrameHome.CanvasSize = UDim2.new(0,0,1.5,0)

UICorner_12.Parent = ScrollingFrameHome

SpeedToolbutton.Name = "Speed Tool button"
SpeedToolbutton.Parent = ScrollingFrameHome
SpeedToolbutton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
SpeedToolbutton.BorderColor3 = Color3.new(0, 0, 0)
SpeedToolbutton.Position = UDim2.new(0.04, 0, 0.025, 0)
SpeedToolbutton.Size = UDim2.new(0.45, 0, 0.08, 0)
SpeedToolbutton.Font = Enum.Font.SourceSans
SpeedToolbutton.Text = "Speed Tool"
SpeedToolbutton.TextColor3 = Color3.new(0, 0, 0)
SpeedToolbutton.TextScaled = true
SpeedToolbutton.TextSize = 14
SpeedToolbutton.TextWrapped = true

UICorner_10.Parent = SpeedToolbutton
UITextSizeConstraint_8.Parent = SpeedToolbutton
UITextSizeConstraint_8.MaxTextSize = 37
UIAspectRatioConstraint_10.Parent = SpeedToolbutton
UIAspectRatioConstraint_10.AspectRatio = 3.9473683834075928

ClicktptoolButton.Name = "Click tp tool Button"
ClicktptoolButton.Parent = ScrollingFrameHome
ClicktptoolButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
ClicktptoolButton.BorderColor3 = Color3.new(0, 0, 0)
ClicktptoolButton.Position = UDim2.new(0.5, 0, 0.025, 0)
ClicktptoolButton.Size = UDim2.new(0.45, 0, 0.08, 0)
ClicktptoolButton.Font = Enum.Font.SourceSans
ClicktptoolButton.Text = "Click tp tool"
ClicktptoolButton.TextColor3 = Color3.new(0, 0, 0)
ClicktptoolButton.TextScaled = true
ClicktptoolButton.TextSize = 14
ClicktptoolButton.TextWrapped = true

UICorner_11.Parent = ClicktptoolButton
UITextSizeConstraint_9.Parent = ClicktptoolButton
UITextSizeConstraint_9.MaxTextSize = 35
UIAspectRatioConstraint_11.Parent = ClicktptoolButton
UIAspectRatioConstraint_11.AspectRatio = 3.9473683834075928

NoclipButton.Name = "Noclip Button"
NoclipButton.Parent = ScrollingFrameHome
NoclipButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
NoclipButton.BorderColor3 = Color3.new(0, 0, 0)
NoclipButton.Position = UDim2.new(0.04, 0, 0.125, 0)
NoclipButton.Size = UDim2.new(0.45, 0, 0.08, 0)
NoclipButton.Font = Enum.Font.SourceSans
NoclipButton.Text = "Noclip"
NoclipButton.TextColor3 = Color3.new(0, 0, 0)
NoclipButton.TextScaled = true
NoclipButton.TextSize = 14
NoclipButton.TextWrapped = true

UICorner_14.Parent = NoclipButton
UITextSizeConstraint_11.Parent = NoclipButton
UITextSizeConstraint_11.MaxTextSize = 37
UIAspectRatioConstraint_13.Parent = NoclipButton
UIAspectRatioConstraint_13.AspectRatio = 3.9473683834075928

UIAspectRatioConstraint_15.Parent = ScrollingFrameHome
UIAspectRatioConstraint_15.AspectRatio = 1.4926543235778809

UIAspectRatioConstraint_16.Parent = MainFrame
UIAspectRatioConstraint_16.AspectRatio = 1.7601344585418701

UIAspectRatioConstraint_17.Parent = ScreenGui
UIAspectRatioConstraint_17.AspectRatio = 1.9216867685317993

HideButton.Name = "HideButton"
HideButton.Parent = ScreenGui
HideButton.BackgroundColor3 = Color3.new(1, 0, 0)
HideButton.BorderColor3 = Color3.new(0, 0, 0)
HideButton.BorderSizePixel = 3
HideButton.Image = "rbxassetid://102860171689689"
HideButton.ImageColor3 = Color3.new(1, 1, 1)
HideButton.ScaleType = Enum.ScaleType.Fit
HideButton.Position = UDim2.new(0.707863092, 0, 0.214006022, 0)
HideButton.Size = UDim2.new(0, 30, 0, 30)
HideButton.ZIndex = 5
HideButton.Draggable = true

local function showTab(tabName)
    ScrollingFrameHome.Visible = false
    ScrollingFramePremium.Visible = false

    if tabName == "Home" then
        ScrollingFrameHome.Visible = true
    elseif tabName == "Premium" then
        if hasGamePass then
            ScrollingFramePremium.Visible = true
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby uzyskać dostęp do tej zakładki!")
            TeleportService:Teleport(TELEPORT_PLACE_ID, player)
            MainFrame.Visible = false
        end
    end
end

local function checkGamePassStatus()
    local success, result = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        hasGamePass = result
        if not initialGamePassCheckDone then
            if hasGamePass then
                sendNotification("Universal Scripts", "Posiadasz wersję premium! Funkcje Premium odblokowane.")
            else
                sendNotification("Universal Scripts", "Nie posiadasz wersji premium. Kliknij zakładkę Premium, aby przejść do zakupu.")
            end
            initialGamePassCheckDone = true
        end
    else
        warn("Błąd podczas sprawdzania wersji premium:", result)
        sendNotification("Universal Scripts", "Nie można sprawdzić statusu wersji premium. Spróbuj ponownie.")
    end
end

local lastPlaceId = game.PlaceId -- Dodano zmienną do śledzenia ostatniego PlaceId

local function updateSpecialButtonVisibility()
    MM2Button.Visible = (game.PlaceId == MM2_EXPERIENCE_ID)
    GhostMM2Button.Visible = (game.PlaceId == MM2_EXPERIENCE_ID)
    GAGButton.Visible = (game.PlaceId == GAG_GAME_ID)
end

local function updateHideButtonPosition()
    if MainFrame.Visible then
        local frameAbsolutePosition = MainFrame.AbsolutePosition
        local frameAbsoluteSize = MainFrame.AbsoluteSize
        local xButtonSize = HideButton.AbsoluteSize

        local xOffsetFromFrameRight = 5
        local yOffsetFromFrameTop = 5

        local newX = frameAbsolutePosition.X + frameAbsoluteSize.X - xButtonSize.X - xOffsetFromFrameRight
        local newY = frameAbsolutePosition.Y + yOffsetFromFrameTop
        HideButton.Position = UDim2.fromOffset(newX, newY)

        lastHideButtonPosition = HideButton.Position
    else
        HideButton.Position = lastHideButtonPosition
    end
end

checkGamePassStatus()
updateSpecialButtonVisibility() -- Pierwsze wywołanie przy starcie
showTab("Home")
updateHideButtonPosition()

HideButton.Changed:Connect(function(property)
    if property == "Position" then
        if not MainFrame.Visible then
            lastHideButtonPosition = HideButton.Position
        end
    end
end)

local function runScriptAndNotify(url, buttonName)
    local success, err = pcall(function()
        loadstring(game:HttpGet(url))()
    end)
    if success then
        sendNotification("Universal Scripts", "Skrypt '" .. buttonName .. "' załadowany!")
    else
        sendNotification("Universal Scripts", "Błąd ładowania skryptu '" .. buttonName .. "': " .. tostring(err))
        warn("Błąd ładowania skryptu '" .. buttonName .. "':", err)
    end
end

SpeedToolbutton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/X7B0HPc2", SpeedToolbutton.Text)
end)

ClicktptoolButton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/4KF2WJ9u", ClicktptoolButton.Text)
end)

NoclipButton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/CnbYfaj1", NoclipButton.Text)
end)

SpectateButton_Premium.MouseButton1Click:Connect(function()
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        if currentHasGamePass then
            runScriptAndNotify("https://pastebin.com/raw/UFVLWQRw", SpectateButton_Premium.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("Błąd podczas sprawdzania wersji premium (Spectate):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania wersji premium.")
    end
end)

MM2Button.MouseButton1Click:Connect(function()
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        if currentHasGamePass then
            runScriptAndNotify("https://raw.githubusercontent.com/vertex-peak/vertex/refs/heads/main/loadstring", MM2Button.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("Błąd podczas sprawdzania wersji premium (MM2):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania wersji premium.")
    end
end)

GhostMM2Button.MouseButton1Click:Connect(function()
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        if currentHasGamePass then
            runScriptAndNotify("https://raw.githubusercontent.com/GhostPlayer352/Test4/main/Murder%20Mystery", GhostMM2Button.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        }
    else
        warn("Błąd podczas sprawdzania wersji premium (GhostMM2):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania wersji premium.")
    end
end)

FlingButton_Premium.MouseButton1Click:Connect(function()
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        if currentHasGamePass then
            runScriptAndNotify('https://raw.githubusercontent.com/0Ben1/fe/main/obf_rf6iQURzu1fqrytcnLBAvW34C9N55kS9g9G3CKz086rC47M6632sEd4ZZYB0AYgV.lua.txt', FlingButton_Premium.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("Błąd podczas sprawdzania wersji premium (Fling):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania wersji premium.")
    end
end)

GAGButton.MouseButton1Click:Connect(function()
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        if currentHasGamePass then
            runScriptAndNotify("https://raw.githubusercontent.com/ThundarZ/Welcome/main/Main/GaG/Main.lua", GAGButton.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("Błąd podczas sprawdzania wersji premium (GAG):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania wersji premium.")
    end
end)

FlyButton.MouseButton1Click:Connect(function()
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        if currentHasGamePass then
            runScriptAndNotify("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source", FlyButton.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("Błąd podczas sprawdzania wersji premium (Console):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania wersji premium.")
    end
end)

Invisibiltybutton.MouseButton1Click:Connect(function()
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        if currentHasGamePass then
            runScriptAndNotify('https://pastebin.com/raw/3Rnd9rHf', Invisibiltybutton.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("Błąd podczas sprawdzania wersji premium (Invisibilty):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania wersji premium.")
    end
end)

HomeTabButton.MouseButton1Click:Connect(function()
    showTab("Home")
end)

PremiumTabButton.MouseButton1Click:Connect(function()
    showTab("Premium")
end)

HideButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
end)

MainFrame.VisibleChanged:Connect(function()
    updateHideButtonPosition()
end)

MarketplaceService.PromptGamePassPurchaseFinished:Connect(function(userId, gamePassId, wasPurchased)
    if userId == player.UserId and gamePassId == GAMEPASS_ID then
        if wasPurchased then
            sendNotification("Universal Scripts", "Wersja premium kupiona pomyślnie! Dziękujemy za zakup.")
            hasGamePass = true
            showTab("Premium")
        else
            sendNotification("Universal Scripts", "Anulowano zakup wersji premium.")
        end
    end
end)

-- Nowa pętla do ciągłego sprawdzania PlaceId
RunService.Stepped:Connect(function()
    if game.PlaceId ~= lastPlaceId then
        lastPlaceId = game.PlaceId
        updateSpecialButtonVisibility()
    end
end)

spawn(function()
    task.wait(1)
    sendNotification("Universal Scripts", "Witaj w Universal Scripts! Skrypt załadowany.")
end)

task.wait(0.5)

MainFrame.Visible = true
