-- Ustawienia (początek Twojego skryptu, pozostaw bez zmian)
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Zmienna do zapisanej prędkości
local savedSpeed = nil

-- Zmienna do przechowywania poprzedniej prędkości
local previousSpeed = humanoid.WalkSpeed

--- START: KOD Z NOWEGO GUI ---
-- Poniżej wklejony kod z Twojego skryptu "tylko GUI",
-- ze zmienionym Parent dla ScreenGui na PlayerGui gracza.

local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local TextLabel = Instance.new("TextLabel")
local UICorner = Instance.new("UICorner")
local Prdko = Instance.new("TextBox") -- Ta zmienna to teraz Twój "SpeedInput"
local UICorner_2 = Instance.new("UICorner")
local UstawPrdkoButton = Instance.new("TextButton") -- Ta zmienna to teraz Twój "Button"
local UICorner_3 = Instance.new("UICorner")
local ZapiszPrdkoButton = Instance.new("TextButton") -- Ta zmienna to teraz Twój "SaveSpeedButton"
local UICorner_4 = Instance.new("UICorner")
local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

-- Properties
ScreenGui.Parent = player:WaitForChild("PlayerGui") -- Ważna zmiana Parent
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
Frame.BackgroundTransparency = 0.30000001192092896
Frame.BorderColor3 = Color3.new(0, 0, 0)
Frame.BorderSizePixel = 5
Frame.Position = UDim2.new(0.784961402, 0, 0.430471897, 0)
Frame.Size = UDim2.new(0, 293, 0, 343)

TextLabel.Parent = Frame
TextLabel.BackgroundColor3 = Color3.new(1, 1, 1)
TextLabel.BackgroundTransparency = 1
TextLabel.BorderColor3 = Color3.new(0, 0, 0)
TextLabel.BorderSizePixel = 0
TextLabel.Position = UDim2.new(0.156996593, 0, 0, 0)
TextLabel.Size = UDim2.new(0, 200, 0, 35)
TextLabel.Font = Enum.Font.SourceSansBold
TextLabel.Text = "Speed Tool"
TextLabel.TextColor3 = Color3.new(1, 1, 1)
TextLabel.TextScaled = true
TextLabel.TextSize = 14
TextLabel.TextWrapped = true

UICorner.Parent = Frame

Prdko.Name = "Prędkość"
Prdko.Parent = Frame
Prdko.BackgroundColor3 = Color3.new(1, 1, 1)
Prdko.BorderColor3 = Color3.new(0, 0, 0)
Prdko.BorderSizePixel = 0
Prdko.Position = UDim2.new(0.105802044, 0, 0.134110793, 0)
Prdko.Size = UDim2.new(0, 235, 0, 42)
Prdko.Font = Enum.Font.SourceSansBold
Prdko.Text = "Wpisz Prędkość..." -- Początkowy tekst w polu
Prdko.TextColor3 = Color3.new(0, 0, 0)
Prdko.TextScaled = true
Prdko.TextSize = 14
Prdko.TextWrapped = true

UICorner_2.Parent = Prdko

UstawPrdkoButton.Name = "UstawPrędkośćButton"
UstawPrdkoButton.Parent = Frame
UstawPrdkoButton.BackgroundColor3 = Color3.new(1, 1, 1)
UstawPrdkoButton.BorderColor3 = Color3.new(0, 0, 0)
UstawPrdkoButton.BorderSizePixel = 0
UstawPrdkoButton.Position = UDim2.new(0.0682593882, 0, 0.527696788, 0)
UstawPrdkoButton.Size = UDim2.new(0, 253, 0, 50)
UstawPrdkoButton.Font = Enum.Font.Unknown
UstawPrdkoButton.Text = "Ustaw Prędkość"
UstawPrdkoButton.TextColor3 = Color3.new(0, 0, 0)
UstawPrdkoButton.TextScaled = true
UstawPrdkoButton.TextSize = 14
UstawPrdkoButton.TextWrapped = true

UICorner_3.Parent = UstawPrdkoButton

ZapiszPrdkoButton.Name = "ZapiszPrędkośćButton"
ZapiszPrdkoButton.Parent = Frame
ZapiszPrdkoButton.BackgroundColor3 = Color3.new(1, 1, 1)
ZapiszPrdkoButton.BorderColor3 = Color3.new(0, 0, 0)
ZapiszPrdkoButton.BorderSizePixel = 0
ZapiszPrdkoButton.Position = UDim2.new(0.075085327, 0, 0.725947499, 0)
ZapiszPrdkoButton.Size = UDim2.new(0, 253, 0, 50)
ZapiszPrdkoButton.Font = Enum.Font.Unknown
ZapiszPrdkoButton.Text = "Zapisz Prędkość"
ZapiszPrdkoButton.TextColor3 = Color3.new(0, 0, 0)
ZapiszPrdkoButton.TextScaled = true
ZapiszPrdkoButton.TextSize = 14
ZapiszPrdkoButton.TextWrapped = true

UICorner_4.Parent = ZapiszPrdkoButton

UIAspectRatioConstraint.Parent = ScreenGui
UIAspectRatioConstraint.AspectRatio = 1.9240963459014893

--- KONIEC KODU Z NOWEGO GUI ---

-- Funkcja do zmiany prędkości gracza (podłączamy do nowego przycisku Prdko)
UstawPrdkoButton.MouseButton1Click:Connect(function()
    local newSpeed = tonumber(Prdko.Text) -- Użyj nowej nazwy zmiennej Prdko
    if newSpeed and newSpeed > 0 then -- Dodano walidację, żeby prędkość była większa od 0
        humanoid.WalkSpeed = newSpeed
        -- Możesz opcjonalnie zaktualizować pole tekstowe, aby pokazać, że prędkość została ustawiona
        Prdko.Text = "Ustawiono: " .. newSpeed
    else
        Prdko.Text = "Nieprawidłowa wartość!"
    end
end)

-- Funkcja zapisywania prędkości (podłączamy do nowego przycisku ZapiszPrdkoButton)
ZapiszPrdkoButton.MouseButton1Click:Connect(function()
    local newSpeed = tonumber(Prdko.Text) -- Użyj nowej nazwy zmiennej Prdko
    if newSpeed and newSpeed > 0 then -- Dodano walidację
        savedSpeed = newSpeed
        Prdko.Text = "Zapisano: " .. savedSpeed -- Wyświetlanie zapisanej prędkości w polu tekstowym
    else
        Prdko.Text = "Nieprawidłowa wartość!"
    end
end)

-- Funkcja do przesuwania GUI (podłączamy do nowej ramki Frame)
local dragging = false
local dragInput, dragStart, startPos

Frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = Frame.Position
    end
end)

Frame.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

Frame.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        Frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Dodanie Toola (teraz odwołujemy się do nowego Frame i ScreenGui)
local tool = Instance.new("Tool")
tool.Name = "SpeedTool"
tool.RequiresHandle = false
tool.Parent = player.Backpack

tool.Activated:Connect(function()
    -- Zmiana prędkości po aktywacji narzędzia
    if savedSpeed then
        humanoid.WalkSpeed = savedSpeed -- Ustawiamy zapisaną prędkość
        Prdko.Text = tostring(savedSpeed) -- Wyświetlamy zapisaną prędkość w polu tekstowym
    else
        -- Jeśli brak zapisanej prędkości, możesz użyć domyślnej lub nic nie robić
        Prdko.Text = "Wpisz Prędkość..."
    end
    ScreenGui.Enabled = true -- Nowe GUI jest widoczne, gdy narzędzie jest aktywne
    Frame.Visible = true -- Upewnij się, że sama ramka jest widoczna
end)

tool.Equipped:Connect(function()
    -- Gdy narzędzie jest w ręce, GUI staje się widoczne
    ScreenGui.Enabled = true
    Frame.Visible = true
    Prdko.Text = tostring(savedSpeed or humanoid.WalkSpeed) -- Pokazujemy zapisaną prędkość lub aktualną
end)

tool.Unequipped:Connect(function()
    -- Gdy narzędzie jest odłożone, GUI znika i wracamy do poprzedniej prędkości
    ScreenGui.Enabled = false -- Ukrywamy całe ScreenGui
    Frame.Visible = false -- Upewnij się, że ramka też się ukrywa
    humanoid.WalkSpeed = previousSpeed -- Przywracamy poprzednią prędkość
    Prdko.Text = tostring(previousSpeed) -- Ustawiamy tekst w GUI na poprzednią wartość prędkości
end)
