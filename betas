--[[

        Universal Scripts - Wersja z usprawnionymi powiadomieniami o załadowaniu skryptu,
        rozdzielonymi funkcjami zakładek, ręcznym pozycjonowaniem przycisków, obsługą dotyku,
        oraz dynamiczną widocznością przycisku MM2 w Premium.
        Version 15.0 (Single Game Pass ID: 1296972626)

]]

local player = game.Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local MarketplaceService = game:GetService("MarketplaceService")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")

local GAMEPASS_ID = 1296972626 -- JEDYNE ID Game Passa dla całego skryptu
-- Ustaw ID experience dla MM2. Zmień na faktyczne ID Murder Mystery 2 lub innego experience.
local MM2_EXPERIENCE_ID = 926002167 -- Przykładowe ID dla Murder Mystery 2 (Może być nieaktualne, znajdź aktualne ID na stronie Roblox)

print("--- SKRYPT UNIVERSAL SCRIPTS START ---") -- DEBUG
print("Skrypt załadowany. ID Game Passa:", GAMEPASS_ID)
print("Twoje UserID:", player.UserId)
print("Aktualne Experience ID:", game.PlaceId)
print("Oczekiwane MM2 Experience ID:", MM2_EXPERIENCE_ID)
print("---")

-- Zmienna globalna do przechowywania statusu Game Passa
local hasGamePass = false
local initialGamePassCheckDone = false -- Nowa zmienna do kontrolowania początkowych powiadomień

local function sendNotification(title, text)
    StarterGui:SetCore("SendNotification", {
        Title = title,
        Text = text,
        Icon = "rbxassetid://6022295536", -- Upewnij się, że to ID obrazu jest poprawne lub zmień na własne
        Duration = 5
    })
end

-- UI Instantiation
local UniversalScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local MainFrameUICorner = Instance.new("UICorner")
local MainFrameUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local TitleLabel = Instance.new("TextLabel")
local TitleLabelUITextSizeConstraint = Instance.new("UITextSizeConstraint")
local TitleLabelUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local TabsFrame = Instance.new("Frame")
local TabsFrameUICorner = Instance.new("UICorner")
local HomeTabButton = Instance.new("TextButton")
local HomeTabButtonUICorner = Instance.new("UICorner")
local PremiumTabButton = Instance.new("TextButton")
local PremiumTabButtonUICorner = Instance.new("UICorner")

local ScrollingFrameHome = Instance.new("ScrollingFrame")
local ScrollingFrameHomeUICorner = Instance.new("UICorner")
local ScrollingFrameHomeUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local ScrollingFramePremium = Instance.new("ScrollingFrame")
local ScrollingFramePremiumUICorner = Instance.new("UICorner")

-- Przyciski dla zakładki Home
local InvisibiltyButtonHome = Instance.new("TextButton")
local InvisibiltyButtonHomeUICorner = Instance.new("UICorner")
local InvisibiltyButtonHomeUITextSizeConstraint = Instance.new("UITextSizeConstraint")
local InvisibiltyButtonHomeUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local SpeedToolButtonHome = Instance.new("TextButton")
local SpeedToolButtonHomeUICorner = Instance.new("UICorner")
local SpeedToolButtonHomeUITextSizeConstraint = Instance.new("UITextSizeConstraint")
local SpeedToolButtonHomeUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local ClicktpToolButtonHome = Instance.new("TextButton")
local ClicktpToolButtonHomeUICorner = Instance.new("UICorner")
local ClicktpToolButtonHomeUITextSizeConstraint = Instance.new("UITextSizeConstraint")
local ClicktpToolButtonHomeUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local SpectateButtonHome = Instance.new("TextButton")
local SpectateButtonHomeUICorner = Instance.new("UICorner")
local SpectateButtonHomeUITextSizeConstraint = Instance.new("UITextSizeConstraint")
local SpectateButtonHomeUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local FlyButtonHome = Instance.new("TextButton")
local FlyButtonHomeUICorner = Instance.new("UICorner")
local FlyButtonHomeUITextSizeConstraint = Instance.new("UITextSizeConstraint")
local FlyButtonHomeUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local NoclipButtonHome = Instance.new("TextButton")
local NoclipButtonHomeUICorner = Instance.new("UICorner")
local NoclipButtonHomeUITextSizeConstraint = Instance.new("UITextSizeConstraint")
local NoclipButtonHomeUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local FlingButtonHome = Instance.new("TextButton")
local FlingButtonHomeUICorner = Instance.new("UICorner")
local FlingButtonHomeUITextSizeConstraint = Instance.new("UITextSizeConstraint")
local FlingButtonHomeUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local MM2ButtonHome = Instance.new("TextButton")
local MM2ButtonHomeUICorner = Instance.new("UICorner")
local MM2ButtonHomeUITextSizeConstraint = Instance.new("UITextSizeConstraint")
local MM2ButtonHomeUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local HideButton = Instance.new("TextButton")
local HideButtonUITextSizeConstraint = Instance.new("UITextSizeConstraint")
local HideButtonUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local ScreenGuiUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

-- Przyciski dla zakładki Premium
local SpectateButtonPremium = Instance.new("TextButton")
local SpectateButtonPremiumUICorner = Instance.new("UICorner")
local SpectateButtonPremiumUITextSizeConstraint = Instance.new("UITextSizeConstraint")
local SpectateButtonPremiumUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local MM2ButtonPremium = Instance.new("TextButton")
local MM2ButtonPremiumUICorner = Instance.new("UICorner")
local MM2ButtonPremiumUITextSizeConstraint = Instance.new("UITextSizeConstraint")
local MM2ButtonPremiumUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local FlyButtonPremium = Instance.new("TextButton")
local FlyButtonPremiumUICorner = Instance.new("UICorner")
local FlyButtonPremiumUITextSizeConstraint = Instance.new("UITextSizeConstraint")
local FlyButtonPremiumUIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")


UniversalScreenGui.Name = "UniversalScriptsGui"
UniversalScreenGui.Parent = player:WaitForChild("PlayerGui")
UniversalScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
UniversalScreenGui.ResetOnSpawn = false

MainFrame.Name = "MainFrame"
MainFrame.Parent = UniversalScreenGui
MainFrame.BackgroundColor3 = Color3.new(0.172549, 0.172549, 0.172549)
MainFrame.BorderColor3 = Color3.new(0, 0, 0)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.350392193, 0, 0.348067284, 0)
MainFrame.Size = UDim2.new(0.432049632, 0, 0.43315509, 0)
MainFrame.Draggable = true
MainFrame.Visible = true

MainFrameUICorner.Parent = MainFrame
MainFrameUIAspectRatioConstraint.Parent = MainFrame
MainFrameUIAspectRatioConstraint.AspectRatio = 1.776203989982605

TitleLabel.Name = "TitleLabel"
TitleLabel.Parent = MainFrame
TitleLabel.BackgroundColor3 = Color3.new(1, 1, 1)
TitleLabel.BackgroundTransparency = 1
TitleLabel.BorderColor3 = Color3.new(0, 0, 0)
TitleLabel.BorderSizePixel = 0
TitleLabel.Position = UDim2.new(0.339712918, 0, 0, 0)
TitleLabel.Size = UDim2.new(0.390181243, 0, 0.0925925896, 0)
TitleLabel.Font = Enum.Font.LuckiestGuy
TitleLabel.Text = "Universal SCripts"
TitleLabel.TextColor3 = Color3.new(1, 1, 1)
TitleLabel.TextScaled = true
TitleLabel.TextSize = 14
TitleLabel.TextWrapped = true

TitleLabelUITextSizeConstraint.Parent = TitleLabel
TitleLabelUITextSizeConstraint.MaxTextSize = 32
TitleLabelUIAspectRatioConstraint.Parent = TitleLabel
TitleLabelUIAspectRatioConstraint.AspectRatio = 7.484848499298096

TabsFrame.Name = "TabsFrame"
TabsFrame.Parent = MainFrame
TabsFrame.BackgroundColor3 = Color3.new(0.141176, 0.141176, 0.141176)
TabsFrame.BorderColor3 = Color3.new(0, 0, 0)
TabsFrame.BorderSizePixel = 0
TabsFrame.Position = UDim2.new(0, 0, 0.11331445, 0)
TabsFrame.Size = UDim2.new(0.2, 0, 0.827160478, 0)
TabsFrame.ClipsDescendants = true

TabsFrameUICorner.Parent = TabsFrame

local TabsListLayout = Instance.new("UIListLayout")
TabsListLayout.Parent = TabsFrame
TabsListLayout.Padding = UDim.new(0, 5)
TabsListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
TabsListLayout.VerticalAlignment = Enum.VerticalAlignment.Top
TabsListLayout.FillDirection = Enum.FillDirection.Vertical

HomeTabButton.Name = "HomeTabButton"
HomeTabButton.Parent = TabsFrame
HomeTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
HomeTabButton.BorderColor3 = Color3.new(0, 0, 0)
HomeTabButton.BorderSizePixel = 0
HomeTabButton.Size = UDim2.new(0.9, 0, 0, 38)
HomeTabButton.Font = Enum.Font.SourceSans
HomeTabButton.Text = "Home"
HomeTabButton.TextColor3 = Color3.new(0, 0, 0)
HomeTabButton.TextScaled = true
HomeTabButton.TextSize = 14
HomeTabButton.TextWrapped = true

HomeTabButtonUICorner.Parent = HomeTabButton

PremiumTabButton.Name = "PremiumTabButton"
PremiumTabButton.Parent = TabsFrame
PremiumTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
PremiumTabButton.BorderColor3 = Color3.new(0, 0, 0)
PremiumTabButton.BorderSizePixel = 0
PremiumTabButton.Size = UDim2.new(0.9, 0, 0, 38)
PremiumTabButton.Font = Enum.Font.SourceSans
PremiumTabButton.Text = "Premium"
PremiumTabButton.TextColor3 = Color3.new(0, 0, 0)
PremiumTabButton.TextScaled = true
PremiumTabButton.TextSize = 14
PremiumTabButton.TextWrapped = true

PremiumTabButtonUICorner.Parent = PremiumTabButton


ScrollingFrameHome.Name = "ScrollingFrameHome"
ScrollingFrameHome.Parent = MainFrame
ScrollingFrameHome.Active = true
ScrollingFrameHome.BackgroundColor3 = Color3.new(0.231373, 0.231373, 0.231373)
ScrollingFrameHome.BorderColor3 = Color3.new(0, 0, 0)
ScrollingFrameHome.BorderSizePixel = 0
ScrollingFrameHome.Position = UDim2.new(0.22, 0, 0.11331445, 0)
ScrollingFrameHome.Size = UDim2.new(0.76, 0, 0.827160478, 0)
ScrollingFrameHome.CanvasSize = UDim2.new(0,0,2,0)
ScrollingFrameHome.Visible = true

ScrollingFrameHomeUICorner.Parent = ScrollingFrameHome
ScrollingFrameHomeUIAspectRatioConstraint.Parent = ScrollingFrameHome
ScrollingFrameHomeUIAspectRatioConstraint.AspectRatio = 2.0342466831207275

-- NIE MA UIListLayout dla ScrollingFrameHome, aby pozwolić na ręczne pozycjonowanie!

ScrollingFramePremium.Name = "ScrollingFramePremium"
ScrollingFramePremium.Parent = MainFrame
ScrollingFramePremium.Active = true
ScrollingFramePremium.BackgroundColor3 = Color3.new(0.231373, 0.231373, 0.231373)
ScrollingFramePremium.BorderColor3 = Color3.new(0, 0, 0)
ScrollingFramePremium.BorderSizePixel = 0
ScrollingFramePremium.Position = UDim2.new(0.22, 0, 0.11331445, 0)
ScrollingFramePremium.Size = UDim2.new(0.76, 0, 0.827160478, 0)
ScrollingFramePremium.CanvasSize = UDim2.new(0,0,2,0)
ScrollingFramePremium.Visible = false

ScrollingFramePremiumUICorner.Parent = ScrollingFramePremium

-- NIE MA UIListLayout dla ScrollingFramePremium, aby pozwolić na ręczne pozycjonowanie!


-- ***** PRZYCISKI ZAKŁADKI HOME - Ręczne pozycjonowanie *****
-- Pamiętaj, aby edytować ich Position i Size w Roblox Studio!
InvisibiltyButtonHome.Name = "Invisibilty button"
InvisibiltyButtonHome.Parent = ScrollingFrameHome
InvisibiltyButtonHome.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
InvisibiltyButtonHome.BorderColor3 = Color3.new(0, 0, 0)
InvisibiltyButtonHome.Size = UDim2.new(0.9, 0, 0, 38)
InvisibiltyButtonHome.Position = UDim2.new(0.05, 0, 0.02, 0)
InvisibiltyButtonHome.Font = Enum.Font.SourceSans
InvisibiltyButtonHome.Text = "Invisibilty"
InvisibiltyButtonHome.TextColor3 = Color3.new(0, 0, 0)
InvisibiltyButtonHome.TextScaled = true
InvisibiltyButtonHome.TextSize = 14
InvisibiltyButtonHome.TextWrapped = true
InvisibiltyButtonHomeUICorner.Parent = InvisibiltyButtonHome
InvisibiltyButtonHomeUITextSizeConstraint.Parent = InvisibiltyButtonHome
InvisibiltyButtonHomeUITextSizeConstraint.MaxTextSize = 37
InvisibiltyButtonHomeUIAspectRatioConstraint.Parent = InvisibiltyButtonHome
InvisibiltyButtonHomeUIAspectRatioConstraint.AspectRatio = 3.9473683834075928

SpeedToolButtonHome.Name = "Speed Tool button"
SpeedToolButtonHome.Parent = ScrollingFrameHome
SpeedToolButtonHome.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
SpeedToolButtonHome.BorderColor3 = Color3.new(0, 0, 0)
SpeedToolButtonHome.Size = UDim2.new(0.9, 0, 0, 38)
SpeedToolButtonHome.Position = UDim2.new(0.05, 0, 0.10, 0)
SpeedToolButtonHome.Font = Enum.Font.SourceSans
SpeedToolButtonHome.Text = "Speed Tool"
SpeedToolButtonHome.TextColor3 = Color3.new(0, 0, 0)
SpeedToolButtonHome.TextScaled = true
SpeedToolButtonHome.TextSize = 14
SpeedToolButtonHome.TextWrapped = true
SpeedToolButtonHomeUICorner.Parent = SpeedToolButtonHome
SpeedToolButtonHomeUITextSizeConstraint.Parent = SpeedToolButtonHome
SpeedToolButtonHomeUITextSizeConstraint.MaxTextSize = 37
SpeedToolButtonHomeUIAspectRatioConstraint.Parent = SpeedToolButtonHome
SpeedToolButtonHomeUIAspectRatioConstraint.AspectRatio = 3.9473683834075928

ClicktpToolButtonHome.Name = "Click tp tool Button"
ClicktpToolButtonHome.Parent = ScrollingFrameHome
ClicktpToolButtonHome.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
ClicktpToolButtonHome.BorderColor3 = Color3.new(0, 0, 0)
ClicktpToolButtonHome.Size = UDim2.new(0.9, 0, 0, 38)
ClicktpToolButtonHome.Position = UDim2.new(0.05, 0, 0.18, 0)
ClicktpToolButtonHome.Font = Enum.Font.SourceSans
ClicktpToolButtonHome.Text = "Click TP Tool"
ClicktpToolButtonHome.TextColor3 = Color3.new(0, 0, 0)
ClicktpToolButtonHome.TextScaled = true
ClicktpToolButtonHome.TextSize = 14
ClicktpToolButtonHome.TextWrapped = true
ClicktpToolButtonHomeUICorner.Parent = ClicktpToolButtonHome
ClicktpToolButtonHomeUITextSizeConstraint.Parent = ClicktpToolButtonHome
ClicktpToolButtonHomeUITextSizeConstraint.MaxTextSize = 35
ClicktpToolButtonHomeUIAspectRatioConstraint.Parent = ClicktpToolButtonHome
ClicktpToolButtonHomeUIAspectRatioConstraint.AspectRatio = 3.9473683834075928

SpectateButtonHome.Name = "Spectate Button"
SpectateButtonHome.Parent = ScrollingFrameHome
SpectateButtonHome.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
SpectateButtonHome.BorderColor3 = Color3.new(0, 0, 0)
SpectateButtonHome.Size = UDim2.new(0.9, 0, 0, 38)
SpectateButtonHome.Position = UDim2.new(0.05, 0, 0.26, 0)
SpectateButtonHome.Font = Enum.Font.SourceSans
SpectateButtonHome.Text = "Spectate"
SpectateButtonHome.TextColor3 = Color3.new(0, 0, 0)
SpectateButtonHome.TextScaled = true
SpectateButtonHome.TextSize = 14
SpectateButtonHome.TextWrapped = true
SpectateButtonHomeUICorner.Parent = SpectateButtonHome
SpectateButtonHomeUITextSizeConstraint.Parent = SpectateButtonHome
SpectateButtonHomeUITextSizeConstraint.MaxTextSize = 37
SpectateButtonHomeUIAspectRatioConstraint.Parent = SpectateButtonHome
SpectateButtonHomeUIAspectRatioConstraint.AspectRatio = 3.9473683834075928

FlyButtonHome.Name = "Fly Button"
FlyButtonHome.Parent = ScrollingFrameHome
FlyButtonHome.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
FlyButtonHome.BorderColor3 = Color3.new(0, 0, 0)
FlyButtonHome.Size = UDim2.new(0.9, 0, 0, 38)
FlyButtonHome.Position = UDim2.new(0.05, 0, 0.34, 0)
FlyButtonHome.Font = Enum.Font.SourceSans
FlyButtonHome.Text = "Fly"
FlyButtonHome.TextColor3 = Color3.new(0, 0, 0)
FlyButtonHome.TextScaled = true
FlyButtonHome.TextSize = 14
FlyButtonHome.TextWrapped = true
FlyButtonHomeUICorner.Parent = FlyButtonHome
FlyButtonHomeUITextSizeConstraint.Parent = FlyButtonHome
FlyButtonHomeUITextSizeConstraint.MaxTextSize = 37
FlyButtonHomeUIAspectRatioConstraint.Parent = FlyButtonHome
FlyButtonHomeUIAspectRatioConstraint.AspectRatio = 3.9473683834075928

NoclipButtonHome.Name = "Noclip Button"
NoclipButtonHome.Parent = ScrollingFrameHome
NoclipButtonHome.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
NoclipButtonHome.BorderColor3 = Color3.new(0, 0, 0)
NoclipButtonHome.Size = UDim2.new(0.9, 0, 0, 38)
NoclipButtonHome.Position = UDim2.new(0.05, 0, 0.42, 0)
NoclipButtonHome.Font = Enum.Font.SourceSans
NoclipButtonHome.Text = "Noclip"
NoclipButtonHome.TextColor3 = Color3.new(0, 0, 0)
NoclipButtonHome.TextScaled = true
NoclipButtonHome.TextSize = 14
NoclipButtonHome.TextWrapped = true
NoclipButtonHomeUICorner.Parent = NoclipButtonHome
NoclipButtonHomeUITextSizeConstraint.Parent = NoclipButtonHome
NoclipButtonHomeUITextSizeConstraint.MaxTextSize = 37
NoclipButtonHomeUIAspectRatioConstraint.Parent = NoclipButtonHome
NoclipButtonHomeUIAspectRatioConstraint.AspectRatio = 3.9473683834075928

FlingButtonHome.Name = "Fling Button"
FlingButtonHome.Parent = ScrollingFrameHome
FlingButtonHome.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
FlingButtonHome.BorderColor3 = Color3.new(0, 0, 0)
FlingButtonHome.Size = UDim2.new(0.9, 0, 0, 38)
FlingButtonHome.Position = UDim2.new(0.05, 0, 0.50, 0)
FlingButtonHome.Font = Enum.Font.SourceSans
FlingButtonHome.Text = "Fling"
FlingButtonHome.TextColor3 = Color3.new(0, 0, 0)
FlingButtonHome.TextScaled = true
FlingButtonHome.TextSize = 14
FlingButtonHome.TextWrapped = true
FlingButtonHomeUICorner.Parent = FlingButtonHome
FlingButtonHomeUITextSizeConstraint.Parent = FlingButtonHome
FlingButtonHomeUITextSizeConstraint.MaxTextSize = 37
FlingButtonHomeUIAspectRatioConstraint.Parent = FlingButtonHome
FlingButtonHomeUIAspectRatioConstraint.AspectRatio = 3.9473683834075928

MM2ButtonHome.Name = "MM2 Button"
MM2ButtonHome.Parent = ScrollingFrameHome
MM2ButtonHome.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
MM2ButtonHome.BorderColor3 = Color3.new(0, 0, 0)
MM2ButtonHome.Size = UDim2.new(0.9, 0, 0, 38)
MM2ButtonHome.Position = UDim2.new(0.05, 0, 0.58, 0)
MM2ButtonHome.Font = Enum.Font.SourceSans
MM2ButtonHome.Text = "MM2"
MM2ButtonHome.TextColor3 = Color3.new(0, 0, 0)
MM2ButtonHome.TextScaled = true
MM2ButtonHome.TextSize = 14
MM2ButtonHome.TextWrapped = true
MM2ButtonHomeUICorner.Parent = MM2ButtonHome
MM2ButtonHomeUITextSizeConstraint.Parent = MM2ButtonHome
MM2ButtonHomeUITextSizeConstraint.MaxTextSize = 37
MM2ButtonHomeUIAspectRatioConstraint.Parent = MM2ButtonHome
MM2ButtonHomeUIAspectRatioConstraint.AspectRatio = 3.9473683834075928


-- ***** PRZYCISKI ZAKŁADKI PREMIUM - Ręczne pozycjonowanie *****
SpectateButtonPremium.Name = "Spectate Button"
SpectateButtonPremium.Parent = ScrollingFramePremium
SpectateButtonPremium.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
SpectateButtonPremium.BorderColor3 = Color3.new(0, 0, 0)
SpectateButtonPremium.Size = UDim2.new(0.9, 0, 0, 38)
SpectateButtonPremium.Position = UDim2.new(0.05, 0, 0.02, 0)
SpectateButtonPremium.Font = Enum.Font.SourceSans
SpectateButtonPremium.Text = "Spectate" -- Usunięto "(Premium)"
SpectateButtonPremium.TextColor3 = Color3.new(0, 0, 0)
SpectateButtonPremium.TextScaled = true
SpectateButtonPremium.TextSize = 14
SpectateButtonPremium.TextWrapped = true
SpectateButtonPremiumUICorner.Parent = SpectateButtonPremium
SpectateButtonPremiumUITextSizeConstraint.Parent = SpectateButtonPremium
SpectateButtonPremiumUITextSizeConstraint.MaxTextSize = 37
SpectateButtonPremiumUIAspectRatioConstraint.Parent = SpectateButtonPremium
SpectateButtonPremiumUIAspectRatioConstraint.AspectRatio = 3.9473683834075928

MM2ButtonPremium.Name = "MM2 Button"
MM2ButtonPremium.Parent = ScrollingFramePremium
MM2ButtonPremium.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
MM2ButtonPremium.BorderColor3 = Color3.new(0, 0, 0)
MM2ButtonPremium.Size = UDim2.new(0.9, 0, 0, 38)
MM2ButtonPremium.Position = UDim2.new(0.05, 0, 0.10, 0)
MM2ButtonPremium.Font = Enum.Font.SourceSans
MM2ButtonPremium.Text = "MM2" -- Usunięto "(Premium)"
MM2ButtonPremium.TextColor3 = Color3.new(0, 0, 0)
MM2ButtonPremium.TextScaled = true
MM2ButtonPremium.TextSize = 14
MM2ButtonPremium.TextWrapped = true
MM2ButtonPremiumUICorner.Parent = MM2ButtonPremium
MM2ButtonPremiumUITextSizeConstraint.Parent = MM2ButtonPremium
MM2ButtonPremiumUITextSizeConstraint.MaxTextSize = 37
MM2ButtonPremiumUIAspectRatioConstraint.Parent = MM2ButtonPremium
MM2ButtonPremiumUIAspectRatioConstraint.AspectRatio = 3.9473683834075928
MM2ButtonPremium.Visible = false -- Domyślnie niewidoczny

FlyButtonPremium.Name = "Fly Button"
FlyButtonPremium.Parent = ScrollingFramePremium
FlyButtonPremium.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
FlyButtonPremium.BorderColor3 = Color3.new(0, 0, 0)
FlyButtonPremium.Size = UDim2.new(0.9, 0, 0, 38)
FlyButtonPremium.Position = UDim2.new(0.05, 0, 0.18, 0)
FlyButtonPremium.Font = Enum.Font.SourceSans
FlyButtonPremium.Text = "Fly" -- Usunięto "(Premium)"
FlyButtonPremium.TextColor3 = Color3.new(0, 0, 0)
FlyButtonPremium.TextScaled = true
FlyButtonPremium.TextSize = 14
FlyButtonPremium.TextWrapped = true
FlyButtonPremiumUICorner.Parent = FlyButtonPremium
FlyButtonPremiumUITextSizeConstraint.Parent = FlyButtonPremium
FlyButtonPremiumUITextSizeConstraint.MaxTextSize = 37
FlyButtonPremiumUIAspectRatioConstraint.Parent = FlyButtonPremium
FlyButtonPremiumUIAspectRatioConstraint.AspectRatio = 3.9473683834075928


HideButton.Name = "HideButton"
HideButton.Parent = UniversalScreenGui
HideButton.BackgroundColor3 = Color3.new(1, 0, 0)
HideButton.BorderColor3 = Color3.new(0, 0, 0)
HideButton.BorderSizePixel = 3
HideButton.Position = UDim2.new(0.803709507, 0, 0.320000000, 0)
HideButton.Size = UDim2.new(0, 31, 0, 29)
HideButton.ZIndex = 2
HideButton.Font = Enum.Font.Unknown
HideButton.Text = "X"
HideButton.TextColor3 = Color3.new(0, 0, 0)
HideButton.TextScaled = true
HideButton.TextSize = 14
HideButton.TextWrapped = true
HideButton.Draggable = true
HideButtonUITextSizeConstraint.Parent = HideButton
HideButtonUITextSizeConstraint.MaxTextSize = 28
HideButtonUIAspectRatioConstraint.Parent = HideButton
HideButtonUIAspectRatioConstraint.AspectRatio = 1.0689654350280762

ScreenGuiUIAspectRatioConstraint.Parent = UniversalScreenGui
ScreenGuiUIAspectRatioConstraint.AspectRatio = 1.7807486057281494


-- Funkcja do przełączania zakładek
local function showTab(tabName)
    print("DEBUG: Próbuję przełączyć na zakładkę:", tabName)
    ScrollingFrameHome.Visible = false
    ScrollingFramePremium.Visible = false

    if tabName == "Home" then
        ScrollingFrameHome.Visible = true
        print("DEBUG: Zakładka Home ustawiona na Visible = true")
    elseif tabName == "Premium" then
        if hasGamePass then
            ScrollingFramePremium.Visible = true
            print("DEBUG: Zakładka Premium ustawiona na Visible = true")
        else
            sendNotification("Universal Scripts", "Musisz posiadać Game Pass, aby uzyskać dostęp do tej zakładki! Otwieram okno zakupu.")
            print("DEBUG: Próba dostępu do zakładki Premium bez Game Passa. Wywołuję PromptGamePassPurchase.")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    end
end

-- Funkcja do sprawdzania statusu Game Passa
local function checkGamePassStatus()
    print("DEBUG: Sprawdzam status Game Passa (ID:", GAMEPASS_ID, ")...")
    local success, result = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        hasGamePass = result
        print("DEBUG: Status Game Passa:", hasGamePass)
        if not initialGamePassCheckDone then
            if hasGamePass then
                sendNotification("Universal Scripts", "Posiadasz Game Pass! Funkcje Premium odblokowane.")
            else
                sendNotification("Universal Scripts", "Nie posiadasz Game Passa. Odwiedź zakładkę Premium, aby go kupić.")
            end
            initialGamePassCheckDone = true
        end
    else
        warn("DEBUG: Błąd podczas sprawdzania Game Passa:", result)
        sendNotification("Universal Scripts", "Nie można sprawdzić statusu Game Passa. Spróbuj ponownie.")
    end
end

-- Funkcja do aktualizacji widoczności przycisku MM2 Premium
local function updateMM2ButtonVisibility()
    if game.PlaceId == MM2_EXPERIENCE_ID then
        MM2ButtonPremium.Visible = true
        print("DEBUG: Jesteś w MM2 Experience, przycisk MM2 (Premium) jest WIDOCZNY.")
    else
        MM2ButtonPremium.Visible = false
        print("DEBUG: Nie jesteś w MM2 Experience, przycisk MM2 (Premium) jest UKRYTY.")
    end
end

-- Sprawdzenie statusu Game Passa przy starcie skryptu
checkGamePassStatus()
updateMM2ButtonVisibility() -- Sprawdź widoczność MM2 przy starcie
-- Domyślnie pokaż zakładkę Home
showTab("Home")

-- Pomocnicza funkcja do uruchamiania skryptów i wysyłania powiadomień
local function runScriptAndNotify(url, buttonName)
    local success, err = pcall(function()
        loadstring(game:HttpGet(url))()
    end)
    if success then
        sendNotification("Universal Scripts", "Skrypt '" .. buttonName .. "' załadowany!")
    else
        sendNotification("Universal Scripts", "Błąd ładowania skryptu '" .. buttonName .. "': " .. tostring(err))
        warn("Błąd ładowania skryptu '" .. buttonName .. "':", err)
    end
end

-- Połączenia przycisków Home
InvisibiltyButtonHome.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk Niewidzialność (Home)")
    runScriptAndNotify('https://pastebin.com/raw/3Rnd9rHf', InvisibiltyButtonHome.Text)
end)

SpeedToolButtonHome.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk Speed Tool (Home)")
    runScriptAndNotify("https://pastebin.com/raw/X7B0HPc2", SpeedToolButtonHome.Text)
end)

ClicktpToolButtonHome.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk Click TP Tool (Home)")
    runScriptAndNotify("https://pastebin.com/raw/4KF2WJ9u", ClicktpToolButtonHome.Text)
end)

SpectateButtonHome.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk Spectate (Home)")
    runScriptAndNotify("https://pastebin.com/raw/UFVLWQRw", SpectateButtonHome.Text)
end)

FlyButtonHome.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk Fly (Home)")
    runScriptAndNotify("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source", FlyButtonHome.Text)
end)

NoclipButtonHome.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk Noclip (Home)")
    runScriptAndNotify("https://pastebin.com/raw/CnbYfaj1", NoclipButtonHome.Text)
end)

FlingButtonHome.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk Fling (Home)")
    runScriptAndNotify('https://raw.githubusercontent.com/0Ben1/fe/main/obf_rf6iQURzu1fqrytcnLBAvW34C9N55kS9g9G3CKz086rC47M6632sEd4ZZYB0AYgV.lua.txt', FlingButtonHome.Text)
end)

MM2ButtonHome.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk MM2 (Home)")
    runScriptAndNotify("https://raw.githubusercontent.com/vertex-peak/vertex/refs/heads/main/loadstring", MM2ButtonHome.Text)
end)

-- Połączenia przycisków Premium
SpectateButtonPremium.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk Spectate (Premium). Sprawdzam Game Passa...")
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        print("DEBUG: Wynik sprawdzenia Game Passa (Spectate):", currentHasGamePass)
        if currentHasGamePass then
            runScriptAndNotify("https://pastebin.com/raw/UFVLWQRw", SpectateButtonPremium.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać Game Pass, aby użyć tej funkcji!")
            print("DEBUG: Wywołuję PromptGamePassPurchase dla Spectate.")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("DEBUG: Błąd podczas sprawdzania Game Passa (Spectate):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania Game Passa.")
    end
end)

MM2ButtonPremium.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk MM2 (Premium). Sprawdzam Game Passa...")
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        print("DEBUG: Wynik sprawdzenia Game Passa (MM2):", currentHasGamePass)
        if currentHasGamePass then
            runScriptAndNotify("https://raw.githubusercontent.com/vertex-peak/vertex/refs/heads/main/loadstring", MM2ButtonPremium.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać Game Pass, aby użyć tej funkcji!")
            print("DEBUG: Wywołuję PromptGamePassPurchase dla MM2.")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("DEBUG: Błąd podczas sprawdzania Game Passa (MM2):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania Game Passa.")
    end
end)

FlyButtonPremium.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk Fly (Premium). Sprawdzam Game Passa...")
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        print("DEBUG: Wynik sprawdzenia Game Passa (Fly):", currentHasGamePass)
        if currentHasGamePass then
            runScriptAndNotify("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source", FlyButtonPremium.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać Game Pass, aby użyć tej funkcji!")
            print("DEBUG: Wywołuję PromptGamePassPurchase dla Fly.")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("DEBUG: Błąd podczas sprawdzania Game Passa (Fly):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania Game Passa.")
    end
end)

-- Logika przycisków przełączających zakładki
HomeTabButton.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk Home. Przełączam na Home.")
    showTab("Home")
end)

PremiumTabButton.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk Premium. Przełączam na Premium lub otwieram okno zakupu.")
    showTab("Premium")
end)

HideButton.MouseButton1Click:Connect(function()
    print("DEBUG: Kliknięto przycisk Hide. Zmieniam widoczność MainFrame.")
    MainFrame.Visible = not MainFrame.Visible
end)

-- Obsługa zdarzenia po zakończeniu próby zakupu Game Passa
MarketplaceService.PromptGamePassPurchaseFinished:Connect(function(userId, gamePassId, wasPurchased)
    print("DEBUG: Zdarzenie PromptGamePassPurchaseFinished: userId=", userId, " gamePassId=", gamePassId, " wasPurchased=", wasPurchased)
    if userId == player.UserId and gamePassId == GAMEPASS_ID then
        if wasPurchased then
            sendNotification("Universal Scripts", "Game Pass kupiony pomyślnie! Dziękujemy za zakup.")
            hasGamePass = true -- Zaktualizuj status
            showTab("Premium") -- Automatycznie przełącz na zakładkę Premium po zakupie
        else
            sendNotification("Universal Scripts", "Anulowano zakup Game Passa.")
        end
    end
end)

-- Początkowe powiadomienie
spawn(function()
    task.wait(1)
    sendNotification("Universal Scripts", "Witaj w Universal Scripts! Skrypt załadowany.")
    print("--- SKRYPT UNIVERSAL SCRIPTS ZAKOŃCZONO INICJALIZACJĘ ---") -- DEBUG
end)

task.wait(0.5)
