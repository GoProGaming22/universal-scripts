local player = game.Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local MarketplaceService = game:GetService("MarketplaceService")
local StarterGui = game:GetService("StarterGui")
local RunService = game:GetService("RunService")
local TeleportService = game:GetService("TeleportService")

local GAMEPASS_ID = 1296972626
local MM2_EXPERIENCE_ID = 142823291
local TELEPORT_PLACE_ID = 6557073879 

local hasGamePass = false
local initialGamePassCheckDone = false

local lastHideButtonPosition = UDim2.new(1, -55, 0, 10)

local function sendNotification(title, text)
    StarterGui:SetCore("SendNotification", {
        Title = title,
        Text = text,
        Icon = "rbxassetid://102860171689689",
        Duration = 5
    })
end

-- Deklaracje instancji
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local UICorner = Instance.new("UICorner") -- Corner dla MainFrame
local TabsFrame = Instance.new("Frame")
local TabsFrame_UICorner = Instance.new("UICorner")
local TabsFrame_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local HomeTabButton = Instance.new("TextButton")
local HomeTabButton_UICorner = Instance.new("UICorner")
local HomeTabButton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local HomeTabButton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local PremiumTabButton = Instance.new("TextButton")
local PremiumTabButton_UICorner = Instance.new("UICorner")
local PremiumTabButton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local PremiumTabButton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local ScrollingFramePremium = Instance.new("ScrollingFrame")
local ScrollingFramePremium_UICorner = Instance.new("UICorner")
local ScrollingFramePremium_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local PremiumUIGridLayout = Instance.new("UIGridLayout") -- Dodano dla wyrównania guzików

local SpectateButton_Premium = Instance.new("TextButton")
local SpectateButton_Premium_UICorner = Instance.new("UICorner")
local SpectateButton_Premium_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local SpectateButton_Premium_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local SpectateButton_Premium_UISizeConstraint = Instance.new("UISizeConstraint") -- Dodano dla minimalnego rozmiaru

local MM2Button = Instance.new("TextButton")
local MM2Button_UICorner = Instance.new("UICorner")
local MM2Button_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local MM2Button_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local MM2Button_UISizeConstraint = Instance.new("UISizeConstraint") -- Dodano dla minimalnego rozmiaru

local FlyButton = Instance.new("TextButton")
local FlyButton_UICorner = Instance.new("UICorner")
local FlyButton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local FlyButton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local FlyButton_UISizeConstraint = Instance.new("UISizeConstraint") -- Dodano dla minimalnego rozmiaru

local Invisibiltybutton = Instance.new("TextButton")
local Invisibiltybutton_UICorner = Instance.new("UICorner")
local Invisibiltybutton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local Invisibiltybutton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local Invisibiltybutton_UISizeConstraint = Instance.new("UISizeConstraint") -- Dodano dla minimalnego rozmiaru

local GhostMM2Button = Instance.new("TextButton") -- Przywrócony GhostMM2Button
local GhostMM2Button_UICorner = Instance.new("UICorner")
local GhostMM2Button_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local GhostMM2Button_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local GhostMM2Button_UISizeConstraint = Instance.new("UISizeConstraint") -- Dodano dla minimalnego rozmiaru


local TitleLabel = Instance.new("TextLabel")
local TitleLabel_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local TitleLabel_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")

local ScrollingFrameHome = Instance.new("ScrollingFrame")
local ScrollingFrameHome_UICorner = Instance.new("UICorner")
local ScrollingFrameHome_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local HomeUIGridLayout = Instance.new("UIGridLayout") -- Dodano dla wyrównania guzików

local SpeedToolbutton = Instance.new("TextButton")
local SpeedToolbutton_UICorner = Instance.new("UICorner")
local SpeedToolbutton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local SpeedToolbutton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local SpeedToolbutton_UISizeConstraint = Instance.new("UISizeConstraint") -- Dodano dla minimalnego rozmiaru

local ClicktptoolButton = Instance.new("TextButton")
local ClicktptoolButton_UICorner = Instance.new("UICorner")
local ClicktptoolButton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local ClicktptoolButton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local ClicktptoolButton_UISizeConstraint = Instance.new("UISizeConstraint") -- Dodano dla minimalnego rozmiaru

local SpectateButton_Home = Instance.new("TextButton")
local SpectateButton_Home_UICorner = Instance.new("UICorner")
local SpectateButton_Home_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local SpectateButton_Home_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local SpectateButton_Home_UISizeConstraint = Instance.new("UISizeConstraint") -- Dodano dla minimalnego rozmiaru

local NoclipButton = Instance.new("TextButton")
local NoclipButton_UICorner = Instance.new("UICorner")
local NoclipButton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local NoclipButton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local NoclipButton_UISizeConstraint = Instance.new("UISizeConstraint") -- Dodano dla minimalnego rozmiaru

local FlingButton = Instance.new("TextButton")
local FlingButton_UICorner = Instance.new("UICorner")
local FlingButton_UITextSizeConstraint = Instance.new("UITextSizeConstraint")
local FlingButton_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local FlingButton_UISizeConstraint = Instance.new("UISizeConstraint") -- Dodano dla minimalnego rozmiaru

local MainFrame_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local ScreenGui_UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local HideButton = Instance.new("ImageButton")


-- Ustawianie właściwości i parentów

ScreenGui.Parent = player:WaitForChild("PlayerGui")
ScreenGui.Name = "UniversalScriptsGUI"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false
ScreenGui.Enabled = true

MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.new(0.172549, 0.172549, 0.172549)
MainFrame.BorderColor3 = Color3.new(0, 0, 0)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.212787732, 0, 0.244107679, 0)
MainFrame.Size = UDim2.new(0.513162374, 0, 0.560262501, 0)
MainFrame.Draggable = true
MainFrame.Visible = true

UICorner.Parent = MainFrame
MainFrame_UIAspectRatioConstraint.Parent = MainFrame
MainFrame_UIAspectRatioConstraint.AspectRatio = 1.7601344585418701

TabsFrame.Name = "TabsFrame"
TabsFrame.Parent = MainFrame
TabsFrame.BackgroundColor3 = Color3.new(0.141176, 0.141176, 0.141176)
TabsFrame.BorderColor3 = Color3.new(0, 0, 0)
TabsFrame.BorderSizePixel = 0
TabsFrame.Position = UDim2.new(0, 0, 3.349695e-8, 0)
TabsFrame.Size = UDim2.new(0.21077837, 0, 0.998841524, 0)

TabsFrame_UICorner.Parent = TabsFrame
TabsFrame_UIAspectRatioConstraint.Parent = TabsFrame
TabsFrame_UIAspectRatioConstraint.AspectRatio = 0.37142857909202576

HomeTabButton.Name = "HomeTabButton"
HomeTabButton.Parent = TabsFrame
HomeTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
HomeTabButton.BorderColor3 = Color3.new(0, 0, 0)
HomeTabButton.BorderSizePixel = 0
HomeTabButton.Position = UDim2.new(0.0591715984, 0, 0.112087913, 0)
HomeTabButton.Size = UDim2.new(0.881656826, 0, 0.083516486, 0)
HomeTabButton.Font = Enum.Font.SourceSans
HomeTabButton.Text = "Home"
HomeTabButton.TextColor3 = Color3.new(0, 0, 0)
HomeTabButton.TextScaled = true
HomeTabButton.TextSize = 14
HomeTabButton.TextWrapped = true

HomeTabButton_UICorner.Parent = HomeTabButton
HomeTabButton_UITextSizeConstraint.Parent = HomeTabButton
HomeTabButton_UITextSizeConstraint.MaxTextSize = 37
HomeTabButton_UIAspectRatioConstraint.Parent = HomeTabButton
HomeTabButton_UIAspectRatioConstraint.AspectRatio = 3.9210526943206787

PremiumTabButton.Name = "PremiumTabButton"
PremiumTabButton.Parent = TabsFrame
PremiumTabButton.BackgroundColor3 = Color3.new(0.419608, 0.419608, 0.419608)
PremiumTabButton.BorderColor3 = Color3.new(0, 0, 0)
PremiumTabButton.BorderSizePixel = 0
PremiumTabButton.Position = UDim2.new(0.0591715984, 0, 0.237362638, 0)
PremiumTabButton.Size = UDim2.new(0.881656826, 0, 0.083516486, 0)
PremiumTabButton.Font = Enum.Font.SourceSans
PremiumTabButton.Text = "Premium"
PremiumTabButton.TextColor3 = Color3.new(0, 0, 0)
PremiumTabButton.TextScaled = true
PremiumTabButton.TextSize = 14
PremiumTabButton.TextWrapped = true

PremiumTabButton_UICorner.Parent = PremiumTabButton
PremiumTabButton_UITextSizeConstraint.Parent = PremiumTabButton
PremiumTabButton_UITextSizeConstraint.MaxTextSize = 37
PremiumTabButton_UIAspectRatioConstraint.Parent = PremiumTabButton
PremiumTabButton_UIAspectRatioConstraint.AspectRatio = 3.9210526943206787

ScrollingFramePremium.Name = "ScrollingFramePremium"
ScrollingFramePremium.Parent = MainFrame
ScrollingFramePremium.Active = true
ScrollingFramePremium.BackgroundColor3 = Color3.new(0.231373, 0.231373, 0.231373)
ScrollingFramePremium.BorderColor3 = Color3.new(0, 0, 0)
ScrollingFramePremium.BorderSizePixel = 0
ScrollingFramePremium.Position = UDim2.new(0.239610985, 0, 0.1111193, 0)
ScrollingFramePremium.Size = UDim2.new(0.733235598, 0, 0.864629686, 0)
ScrollingFramePremium.CanvasSize = UDim2.new(0,0,1.5,0)
ScrollingFramePremium.Visible = false

ScrollingFramePremium_UICorner.Parent = ScrollingFramePremium
ScrollingFramePremium_UIAspectRatioConstraint.Parent = ScrollingFramePremium
ScrollingFramePremium_UIAspectRatioConstraint.AspectRatio = 1.4926543235778809

-- UIGridLayout dla ScrollingFramePremium
PremiumUIGridLayout.Parent = ScrollingFramePremium
PremiumUIGridLayout.CellSize = UDim2.new(0.28, 0, 0.06, 0) -- Rozmiar komórek w siatce (procentowo)
PremiumUIGridLayout.CellPadding = UDim2.new(0.02, 0, 0.02, 0) -- Dopełnienie między komórkami
PremiumUIGridLayout.StartCorner = Enum.Corner.TopLeft
PremiumUIGridLayout.FillDirection = Enum.FillDirection.Horizontal
PremiumUIGridLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
PremiumUIGridLayout.VerticalAlignment = Enum.VerticalAlignment.Top

SpectateButton_Premium.Name = "Spectate Button Premium"
SpectateButton_Premium.Parent = ScrollingFramePremium
SpectateButton_Premium.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
SpectateButton_Premium.BorderColor3 = Color3.new(0, 0, 0)
-- Pozycja i rozmiar są teraz zarządzane przez UIGridLayout, więc można je uprościć lub usunąć, jeśli nie są potrzebne
SpectateButton_Premium.Size = UDim2.new(0.28, 0, 0.06, 0) -- Wartości dla CellSize
SpectateButton_Premium.Font = Enum.Font.SourceSans
SpectateButton_Premium.Text = "Spectate"
SpectateButton_Premium.TextColor3 = Color3.new(0, 0, 0)
SpectateButton_Premium.TextScaled = true
SpectateButton_Premium.TextSize = 14
SpectateButton_Premium.TextWrapped = true

SpectateButton_Premium_UICorner.Parent = SpectateButton_Premium
SpectateButton_Premium_UITextSizeConstraint.Parent = SpectateButton_Premium
SpectateButton_Premium_UITextSizeConstraint.MaxTextSize = 37
SpectateButton_Premium_UIAspectRatioConstraint.Parent = SpectateButton_Premium
SpectateButton_Premium_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928
SpectateButton_Premium_UISizeConstraint.Parent = SpectateButton_Premium -- Nowe
SpectateButton_Premium_UISizeConstraint.MinSize = UDim2.new(0, 80, 0, 25) -- Minimalny rozmiar pikselach

MM2Button.Name = "MM2 Button"
MM2Button.Parent = ScrollingFramePremium
MM2Button.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
MM2Button.BorderColor3 = Color3.new(0, 0, 0)
MM2Button.Size = UDim2.new(0.28, 0, 0.06, 0) -- Wartości dla CellSize
MM2Button.Font = Enum.Font.SourceSans
MM2Button.Text = "MM2"
MM2Button.TextColor3 = Color3.new(0, 0, 0)
MM2Button.TextScaled = true
MM2Button.TextSize = 14
MM2Button.TextWrapped = true
MM2Button.Visible = false -- Będzie widoczne tylko w grze MM2

MM2Button_UICorner.Parent = MM2Button
MM2Button_UITextSizeConstraint.Parent = MM2Button
MM2Button_UITextSizeConstraint.MaxTextSize = 37
MM2Button_UIAspectRatioConstraint.Parent = MM2Button
MM2Button_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928
MM2Button_UISizeConstraint.Parent = MM2Button -- Nowe
MM2Button_UISizeConstraint.MinSize = UDim2.new(0, 80, 0, 25) -- Minimalny rozmiar pikselach

FlyButton.Name = "Console Button"
FlyButton.Parent = ScrollingFramePremium
FlyButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
FlyButton.BorderColor3 = Color3.new(0, 0, 0)
FlyButton.Size = UDim2.new(0.28, 0, 0.06, 0) -- Wartości dla CellSize
FlyButton.Font = Enum.Font.SourceSans
FlyButton.Text = "Console"
FlyButton.TextColor3 = Color3.new(0, 0, 0)
FlyButton.TextScaled = true
FlyButton.TextSize = 14
FlyButton.TextWrapped = true

FlyButton_UICorner.Parent = FlyButton
FlyButton_UITextSizeConstraint.Parent = FlyButton
FlyButton_UITextSizeConstraint.MaxTextSize = 37
FlyButton_UIAspectRatioConstraint.Parent = FlyButton
FlyButton_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928
FlyButton_UISizeConstraint.Parent = FlyButton -- Nowe
FlyButton_UISizeConstraint.MinSize = UDim2.new(0, 80, 0, 25) -- Minimalny rozmiar pikselach

Invisibiltybutton.Name = "Invisibilty Button"
Invisibiltybutton.Parent = ScrollingFramePremium
Invisibiltybutton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
Invisibiltybutton.BorderColor3 = Color3.new(0, 0, 0)
Invisibiltybutton.Size = UDim2.new(0.28, 0, 0.06, 0) -- Wartości dla CellSize
Invisibiltybutton.Font = Enum.Font.SourceSans
Invisibiltybutton.Text = "Invisibilty"
Invisibiltybutton.TextColor3 = Color3.new(0, 0, 0)
Invisibiltybutton.TextScaled = true
Invisibiltybutton.TextSize = 14
Invisibiltybutton.TextWrapped = true

Invisibiltybutton_UICorner.Parent = Invisibiltybutton
Invisibiltybutton_UITextSizeConstraint.Parent = Invisibiltybutton
Invisibiltybutton_UITextSizeConstraint.MaxTextSize = 37
Invisibiltybutton_UIAspectRatioConstraint.Parent = Invisibiltybutton
Invisibiltybutton_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928
Invisibiltybutton_UISizeConstraint.Parent = Invisibiltybutton -- Nowe
Invisibiltybutton_UISizeConstraint.MinSize = UDim2.new(0, 80, 0, 25) -- Minimalny rozmiar pikselach

GhostMM2Button.Name = "GhostMM2 Button"
GhostMM2Button.Parent = ScrollingFramePremium
GhostMM2Button.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
GhostMM2Button.BorderColor3 = Color3.new(0, 0, 0)
GhostMM2Button.Size = UDim2.new(0.28, 0, 0.06, 0) -- Wartości dla CellSize
GhostMM2Button.Font = Enum.Font.SourceSans
GhostMM2Button.Text = "GhostMM2"
GhostMM2Button.TextColor3 = Color3.new(0, 0, 0)
GhostMM2Button.TextScaled = true
GhostMM2Button.TextSize = 14
GhostMM2Button.TextWrapped = true
GhostMM2Button.Visible = false -- Będzie widoczne tylko w grze MM2

GhostMM2Button_UICorner.Parent = GhostMM2Button
GhostMM2Button_UITextSizeConstraint.Parent = GhostMM2Button
GhostMM2Button_UITextSizeConstraint.MaxTextSize = 37
GhostMM2Button_UIAspectRatioConstraint.Parent = GhostMM2Button
GhostMM2Button_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928
GhostMM2Button_UISizeConstraint.Parent = GhostMM2Button -- Nowe
GhostMM2Button_UISizeConstraint.MinSize = UDim2.new(0, 80, 0, 25) -- Minimalny rozmiar pikselach


TitleLabel.Name = "TitleLabel"
TitleLabel.Parent = MainFrame
TitleLabel.BackgroundColor3 = Color3.new(1, 1, 1)
TitleLabel.BackgroundTransparency = 1
TitleLabel.BorderColor3 = Color3.new(0, 0, 0)
TitleLabel.BorderSizePixel = 0
TitleLabel.Position = UDim2.new(0.425298363, 0, 0.0153667927, 0)
TitleLabel.Size = UDim2.new(0.3616907, 0, 0.0724434555, 0)
TitleLabel.Font = Enum.Font.LuckiestGuy
TitleLabel.Text = "UNIVERSAL SCRIPTS"
TitleLabel.TextColor3 = Color3.new(1, 1, 1)
TitleLabel.TextScaled = true
TitleLabel.TextSize = 14
TitleLabel.TextWrapped = true

TitleLabel_UITextSizeConstraint.Parent = TitleLabel
TitleLabel_UITextSizeConstraint.MaxTextSize = 31
TitleLabel_UIAspectRatioConstraint.Parent = TitleLabel
TitleLabel_UIAspectRatioConstraint.AspectRatio = 8.78787899017334

ScrollingFrameHome.Name = "ScrollingFrameHome"
ScrollingFrameHome.Parent = MainFrame
ScrollingFrameHome.Active = true
ScrollingFrameHome.BackgroundColor3 = Color3.new(0.231373, 0.231373, 0.231373)
ScrollingFrameHome.BorderColor3 = Color3.new(0, 0, 0)
ScrollingFrameHome.BorderSizePixel = 0
ScrollingFrameHome.Position = UDim2.new(0.239610985, 0, 0.113314532, 0)
ScrollingFrameHome.Size = UDim2.new(0.733235598, 0, 0.864629686, 0)
ScrollingFrameHome.CanvasSize = UDim2.new(0,0,1.5,0)

ScrollingFrameHome_UICorner.Parent = ScrollingFrameHome
ScrollingFrameHome_UIAspectRatioConstraint.Parent = ScrollingFrameHome
ScrollingFrameHome_UIAspectRatioConstraint.AspectRatio = 1.4926543235778809

-- UIGridLayout dla ScrollingFrameHome
HomeUIGridLayout.Parent = ScrollingFrameHome
HomeUIGridLayout.CellSize = UDim2.new(0.28, 0, 0.06, 0) -- Rozmiar komórek
HomeUIGridLayout.CellPadding = UDim2.new(0.02, 0, 0.02, 0) -- Dopełnienie
HomeUIGridLayout.StartCorner = Enum.Corner.TopLeft
HomeUIGridLayout.FillDirection = Enum.FillDirection.Horizontal
HomeUIGridLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
HomeUIGridLayout.VerticalAlignment = Enum.VerticalAlignment.Top


SpeedToolbutton.Name = "Speed Tool button"
SpeedToolbutton.Parent = ScrollingFrameHome
SpeedToolbutton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
SpeedToolbutton.BorderColor3 = Color3.new(0, 0, 0)
SpeedToolbutton.Size = UDim2.new(0.28, 0, 0.06, 0) -- Wartości dla CellSize
SpeedToolbutton.Font = Enum.Font.SourceSans
SpeedToolbutton.Text = "Speed Tool"
SpeedToolbutton.TextColor3 = Color3.new(0, 0, 0)
SpeedToolbutton.TextScaled = true
SpeedToolbutton.TextSize = 14
SpeedToolbutton.TextWrapped = true

SpeedToolbutton_UICorner.Parent = SpeedToolbutton
SpeedToolbutton_UITextSizeConstraint.Parent = SpeedToolbutton
SpeedToolbutton_UITextSizeConstraint.MaxTextSize = 37
SpeedToolbutton_UIAspectRatioConstraint.Parent = SpeedToolbutton
SpeedToolbutton_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928
SpeedToolbutton_UISizeConstraint.Parent = SpeedToolbutton -- Nowe
SpeedToolbutton_UISizeConstraint.MinSize = UDim2.new(0, 80, 0, 25) -- Minimalny rozmiar pikselach

ClicktptoolButton.Name = "Click tp tool Button"
ClicktptoolButton.Parent = ScrollingFrameHome
ClicktptoolButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
ClicktptoolButton.BorderColor3 = Color3.new(0, 0, 0)
ClicktptoolButton.Size = UDim2.new(0.28, 0, 0.06, 0) -- Wartości dla CellSize
ClicktptoolButton.Font = Enum.Font.SourceSans
ClicktptoolButton.Text = "Click tp tool"
ClicktptoolButton.TextColor3 = Color3.new(0, 0, 0)
ClicktptoolButton.TextScaled = true
ClicktptoolButton.TextSize = 14
ClicktptoolButton.TextWrapped = true

ClicktptoolButton_UICorner.Parent = ClicktptoolButton
ClicktptoolButton_UITextSizeConstraint.Parent = ClicktptoolButton
ClicktptoolButton_UITextSizeConstraint.MaxTextSize = 35
ClicktptoolButton_UIAspectRatioConstraint.Parent = ClicktptoolButton
ClicktptoolButton_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928
ClicktptoolButton_UISizeConstraint.Parent = ClicktptoolButton -- Nowe
ClicktptoolButton_UISizeConstraint.MinSize = UDim2.new(0, 80, 0, 25) -- Minimalny rozmiar pikselach

SpectateButton_Home.Name = "Spectate Button"
SpectateButton_Home.Parent = ScrollingFrameHome
SpectateButton_Home.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
SpectateButton_Home.BorderColor3 = Color3.new(0, 0, 0)
SpectateButton_Home.Size = UDim2.new(0.28, 0, 0.06, 0) -- Wartości dla CellSize
SpectateButton_Home.Font = Enum.Font.SourceSans
SpectateButton_Home.Text = "Spectate"
SpectateButton_Home.TextColor3 = Color3.new(0, 0, 0)
SpectateButton_Home.TextScaled = true
SpectateButton_Home.TextSize = 14
SpectateButton_Home.TextWrapped = true

SpectateButton_Home_UICorner.Parent = SpectateButton_Home
SpectateButton_Home_UITextSizeConstraint.Parent = SpectateButton_Home
SpectateButton_Home_UITextSizeConstraint.MaxTextSize = 37
SpectateButton_Home_UIAspectRatioConstraint.Parent = SpectateButton_Home
SpectateButton_Home_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928
SpectateButton_Home_UISizeConstraint.Parent = SpectateButton_Home -- Nowe
SpectateButton_Home_UISizeConstraint.MinSize = UDim2.new(0, 80, 0, 25) -- Minimalny rozmiar pikselach

NoclipButton.Name = "Noclip Button"
NoclipButton.Parent = ScrollingFrameHome
NoclipButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
NoclipButton.BorderColor3 = Color3.new(0, 0, 0)
NoclipButton.Size = UDim2.new(0.28, 0, 0.06, 0) -- Wartości dla CellSize
NoclipButton.Font = Enum.Font.SourceSans
NoclipButton.Text = "Noclip"
NoclipButton.TextColor3 = Color3.new(0, 0, 0)
NoclipButton.TextScaled = true
NoclipButton.TextSize = 14
NoclipButton.TextWrapped = true

NoclipButton_UICorner.Parent = NoclipButton
NoclipButton_UITextSizeConstraint.Parent = NoclipButton
NoclipButton_UITextSizeConstraint.MaxTextSize = 37
NoclipButton_UIAspectRatioConstraint.Parent = NoclipButton
NoclipButton_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928
NoclipButton_UISizeConstraint.Parent = NoclipButton -- Nowe
NoclipButton_UISizeConstraint.MinSize = UDim2.new(0, 80, 0, 25) -- Minimalny rozmiar pikselach

FlingButton.Name = "Fling Button"
FlingButton.Parent = ScrollingFrameHome
FlingButton.BackgroundColor3 = Color3.new(0.356863, 0.356863, 0.356863)
FlingButton.BorderColor3 = Color3.new(0, 0, 0)
FlingButton.Size = UDim2.new(0.28, 0, 0.06, 0) -- Wartości dla CellSize
FlingButton.Font = Enum.Font.SourceSans
FlingButton.Text = "Fling"
FlingButton.TextColor3 = Color3.new(0, 0, 0)
FlingButton.TextScaled = true
FlingButton.TextSize = 14
FlingButton.TextWrapped = true

FlingButton_UICorner.Parent = FlingButton
FlingButton_UITextSizeConstraint.Parent = FlingButton
FlingButton_UITextSizeConstraint.MaxTextSize = 37
FlingButton_UIAspectRatioConstraint.Parent = FlingButton
FlingButton_UIAspectRatioConstraint.AspectRatio = 3.9473683834075928
FlingButton_UISizeConstraint.Parent = FlingButton -- Nowe
FlingButton_UISizeConstraint.MinSize = UDim2.new(0, 80, 0, 25) -- Minimalny rozmiar pikselach

ScreenGui_UIAspectRatioConstraint.Parent = ScreenGui
ScreenGui_UIAspectRatioConstraint.AspectRatio = 1.9216867685317993

HideButton.Name = "HideButton"
HideButton.Parent = ScreenGui -- Zmieniono na ScreenGui, żeby mógł być przeciągany niezależnie
HideButton.BackgroundColor3 = Color3.new(1, 0, 0)
HideButton.BorderColor3 = Color3.new(0, 0, 0)
HideButton.BorderSizePixel = 3
HideButton.Image = "rbxassetid://102860171689689"
HideButton.ImageColor3 = Color3.new(1, 1, 1)
HideButton.ScaleType = Enum.ScaleType.Fit
HideButton.Position = UDim2.new(0.707863092, 0, 0.214006022, 0) -- Początkowa pozycja
HideButton.Size = UDim2.new(0, 30, 0, 30)
HideButton.ZIndex = 5
HideButton.Draggable = true


local function showTab(tabName)
    ScrollingFrameHome.Visible = false
    ScrollingFramePremium.Visible = false

    if tabName == "Home" then
        ScrollingFrameHome.Visible = true
    elseif tabName == "Premium" then
        if hasGamePass then
            ScrollingFramePremium.Visible = true
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby uzyskać dostęp do tej zakładki!")
            TeleportService:Teleport(TELEPORT_PLACE_ID, player)
            MainFrame.Visible = false
        end
    end
end

local function checkGamePassStatus()
    local success, result = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        hasGamePass = result
        if not initialGamePassCheckDone then
            if hasGamePass then
                sendNotification("Universal Scripts", "Posiadasz wersję premium! Funkcje Premium odblokowane.")
            else
                sendNotification("Universal Scripts", "Nie posiadasz wersji premium. Kliknij zakładkę Premium, aby przejść do zakupu.")
            end
            initialGamePassCheckDone = true
        end
    else
        warn("Błąd podczas sprawdzania wersji premium:", result)
        sendNotification("Universal Scripts", "Nie można sprawdzić statusu wersji premium. Spróbuj ponownie.")
    end
end

local function updateMM2ButtonVisibility()
    if game.PlaceId == MM2_EXPERIENCE_ID then
        MM2Button.Visible = true
        GhostMM2Button.Visible = true -- Dodano widoczność dla GhostMM2Button
    else
        MM2Button.Visible = false
        GhostMM2Button.Visible = false
    end
end

local function updateHideButtonPosition()
    if MainFrame.Visible then
        local frameAbsolutePosition = MainFrame.AbsolutePosition
        local frameAbsoluteSize = MainFrame.AbsoluteSize
        local xButtonSize = HideButton.AbsoluteSize

        local xOffsetFromFrameRight = 5
        local yOffsetFromFrameTop = 5

        local newX = frameAbsolutePosition.X + frameAbsoluteSize.X - xButtonSize.X - xOffsetFromFrameRight
        local newY = frameAbsolutePosition.Y + yOffsetFromFrameTop
        HideButton.Position = UDim2.fromOffset(newX, newY)

        lastHideButtonPosition = HideButton.Position
    else
        -- Jeśli MainFrame jest ukryty, przycisk Hide pozostaje w ostatniej znanej pozycji
        HideButton.Position = lastHideButtonPosition
    end
end

local function runScriptAndNotify(url, buttonName)
    local success, err = pcall(function()
        loadstring(game:HttpGet(url))()
    end)
    if success then
        sendNotification("Universal Scripts", "Skrypt '" .. buttonName .. "' załadowany!")
    else
        sendNotification("Universal Scripts", "Błąd ładowania skryptu '" .. buttonName .. "': " .. tostring(err))
        warn("Błąd ładowania skryptu '" .. buttonName .. "':", err)
    end
end

-- Połączenia przycisków Home
SpeedToolbutton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/X7B0HPc2", SpeedToolbutton.Text)
end)

ClicktptoolButton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/4KF2WJ9u", ClicktptoolButton.Text)
end)

SpectateButton_Home.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/UFVLWQRw", SpectateButton_Home.Text)
end)

NoclipButton.MouseButton1Click:Connect(function()
    runScriptAndNotify("https://pastebin.com/raw/CnbYfaj1", NoclipButton.Text)
end)

FlingButton.MouseButton1Click:Connect(function()
    runScriptAndNotify('https://raw.githubusercontent.com/0Ben1/fe/main/obf_rf6iQURzu1fqrytcnLBAvW34C9N55kS9g9G3CKz086rC47M6632sEd4ZZYB0AYgV.lua.txt', FlingButton.Text)
end)

-- Połączenia przycisków Premium
SpectateButton_Premium.MouseButton1Click:Connect(function()
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        if currentHasGamePass then
            runScriptAndNotify("https://pastebin.com/raw/UFVLWQRw", SpectateButton_Premium.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("Błąd podczas sprawdzania wersji premium (Spectate):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania wersji premium.")
    end
end)

MM2Button.MouseButton1Click:Connect(function()
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        if currentHasGamePass then
            runScriptAndNotify("https://raw.githubusercontent.com/vertex-peak/vertex/refs/heads/main/loadstring", MM2Button.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("Błąd podczas sprawdzania wersji premium (MM2):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania wersji premium.")
    end
end)

FlyButton.MouseButton1Click:Connect(function()
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        if currentHasGamePass then
            runScriptAndNotify("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source", FlyButton.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("Błąd podczas sprawdzania wersji premium (Console):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania wersji premium.")
    end
end)

Invisibiltybutton.MouseButton1Click:Connect(function()
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        if currentHasGamePass then
            runScriptAndNotify('https://pastebin.com/raw/3Rnd9rHf', Invisibiltybutton.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("Błąd podczas sprawdzania wersji premium (Invisibilty):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania wersji premium.")
    end
end)

GhostMM2Button.MouseButton1Click:Connect(function()
    local success, currentHasGamePass = pcall(function()
        return MarketplaceService:UserOwnsGamePassAsync(player.UserId, GAMEPASS_ID)
    end)

    if success then
        if currentHasGamePass then
            runScriptAndNotify("https://raw.githubusercontent.com/GhostPlayer352/Test4/main/Murder%20Mystery", GhostMM2Button.Text)
        else
            sendNotification("Universal Scripts", "Musisz posiadać wersję premium, aby użyć tej funkcji!")
            MarketplaceService:PromptGamePassPurchase(player, GAMEPASS_ID)
        end
    else
        warn("Błąd podczas sprawdzania wersji premium (GhostMM2):", currentHasGamePass)
        sendNotification("Universal Scripts", "Wystąpił błąd podczas sprawdzania wersji premium.")
    end
end)

-- Połączenia zakładek i ukrywania/pokazywania GUI
HomeTabButton.MouseButton1Click:Connect(function()
    showTab("Home")
end)

PremiumTabButton.MouseButton1Click:Connect(function()
    showTab("Premium")
end)

HideButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
end)

MainFrame.VisibleChanged:Connect(function()
    updateHideButtonPosition()
end)

HideButton.Changed:Connect(function(property)
    if property == "Position" then
        if not MainFrame.Visible then
            lastHideButtonPosition = HideButton.Position
        end
    end
end)

-- Aktualizacja pozycji HideButton w każdej klatce (dla płynnego śledzenia przeciągania)
RunService.RenderStepped:Connect(updateHideButtonPosition)

-- Logika dla zmiany PlaceId i GamePassa
local lastPlaceId = game.PlaceId
RunService.Stepped:Connect(function()
    if game.PlaceId ~= lastPlaceId then
        lastPlaceId = game.PlaceId
        updateMM2ButtonVisibility()
        -- Jeśli zakładka premium była aktywna i zmieniono grę, sprawdź dostęp ponownie
        if ScrollingFramePremium.Visible then
            showTab("Premium")
        end
    end
end)

-- Dodatkowe sprawdzenia po załadowaniu postaci i gry
player.CharacterAdded:Connect(function()
    updateMM2ButtonVisibility()
end)

game.Loaded:Connect(function()
    updateMM2ButtonVisibility()
end)

MarketplaceService.PromptGamePassPurchaseFinished:Connect(function(userId, gamePassId, wasPurchased)
    if userId == player.UserId and gamePassId == GAMEPASS_ID then
        if wasPurchased then
            sendNotification("Universal Scripts", "Wersja premium kupiona pomyślnie! Dziękujemy za zakup.")
            hasGamePass = true
            showTab("Premium")
        else
            sendNotification("Universal Scripts", "Anulowano zakup wersji premium.")
        end
    end
end)

-- Główna funkcja startowa uruchamiana po załadowaniu PlayerGui
spawn(function()
    player.PlayerGui.ChildAdded:Wait() -- Czekaj, aż PlayerGui zostanie w pełni załadowane
    task.wait(1) -- Krótkie opóźnienie dla pewności
    sendNotification("Universal Scripts", "Witaj w Universal Scripts! Skrypt załadowany.")
    checkGamePassStatus()
    updateMM2ButtonVisibility()
    showTab("Home") -- Domyślnie pokaż zakładkę Home
    updateHideButtonPosition() -- Ustaw początkową pozycję przycisku Hide
end)
